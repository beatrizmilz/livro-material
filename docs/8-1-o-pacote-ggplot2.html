<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>8.1 O pacote ggplot2 | Ciência de Dados em R</title>
  <meta name="description" content="Livro com os tutoriais e material dos cursos sobre ciência de dados da Curso-R." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="8.1 O pacote ggplot2 | Ciência de Dados em R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="assets/img/logo.png" />
  <meta property="og:description" content="Livro com os tutoriais e material dos cursos sobre ciência de dados da Curso-R." />
  <meta name="github-repo" content="curso-r/livro-material" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="8.1 O pacote ggplot2 | Ciência de Dados em R" />
  
  <meta name="twitter:description" content="Livro com os tutoriais e material dos cursos sobre ciência de dados da Curso-R." />
  <meta name="twitter:image" content="assets/img/logo.png" />

<meta name="author" content="Curso-R" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="assets/img/favicon.ico" type="image/x-icon" />
<link rel="prev" href="8-graficos.html"/>
<link rel="next" href="8-2-o-pacote-plotly.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script async defer src="https://hypothes.is/embed.js"></script>
<link href='https://fonts.googleapis.com/css?family=Arvo' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Arvo' rel='stylesheet' type='text/css'>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="assets/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./index.html"><img src = "https://raw.githubusercontent.com/curso-r/site-v2/master/static/img/logo_cursor_full.png" width = 80%></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Sobre</a></li>
<li class="chapter" data-level="1" data-path="1-instalacao.html"><a href="1-instalacao.html"><i class="fa fa-check"></i><b>1</b> Instalação</a>
<ul>
<li class="chapter" data-level="1.1" data-path="1-1-instalação-do-r.html"><a href="1-1-instalação-do-r.html"><i class="fa fa-check"></i><b>1.1</b> Instalação do R</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="1-1-instalação-do-r.html"><a href="1-1-instalação-do-r.html#no-windows"><i class="fa fa-check"></i><b>1.1.1</b> No Windows</a></li>
<li class="chapter" data-level="1.1.2" data-path="1-1-instalação-do-r.html"><a href="1-1-instalação-do-r.html#no-linux"><i class="fa fa-check"></i><b>1.1.2</b> No Linux</a></li>
<li class="chapter" data-level="1.1.3" data-path="1-1-instalação-do-r.html"><a href="1-1-instalação-do-r.html#no-mac"><i class="fa fa-check"></i><b>1.1.3</b> No Mac</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="1-2-instalação-do-rstudio.html"><a href="1-2-instalação-do-rstudio.html"><i class="fa fa-check"></i><b>1.2</b> Instalação do RStudio</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="2-rstudio.html"><a href="2-rstudio.html"><i class="fa fa-check"></i><b>2</b> RStudio</a>
<ul>
<li class="chapter" data-level="2.1" data-path="2-1-telas.html"><a href="2-1-telas.html"><i class="fa fa-check"></i><b>2.1</b> Telas</a></li>
<li class="chapter" data-level="2.2" data-path="2-2-atalhos.html"><a href="2-2-atalhos.html"><i class="fa fa-check"></i><b>2.2</b> Atalhos</a></li>
<li class="chapter" data-level="2.3" data-path="2-3-projetos.html"><a href="2-3-projetos.html"><i class="fa fa-check"></i><b>2.3</b> Projetos</a></li>
<li class="chapter" data-level="2.4" data-path="2-4-git-e-versionamento.html"><a href="2-4-git-e-versionamento.html"><i class="fa fa-check"></i><b>2.4</b> Git e versionamento</a></li>
<li class="chapter" data-level="2.5" data-path="2-5-cheatsheets.html"><a href="2-5-cheatsheets.html"><i class="fa fa-check"></i><b>2.5</b> Cheatsheets</a></li>
<li class="chapter" data-level="2.6" data-path="2-6-addins.html"><a href="2-6-addins.html"><i class="fa fa-check"></i><b>2.6</b> Addins</a></li>
<li class="chapter" data-level="2.7" data-path="2-7-snippets.html"><a href="2-7-snippets.html"><i class="fa fa-check"></i><b>2.7</b> Snippets</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="3-r-base.html"><a href="3-r-base.html"><i class="fa fa-check"></i><b>3</b> R Básico</a>
<ul>
<li class="chapter" data-level="3.1" data-path="3-1-pedindo-ajuda.html"><a href="3-1-pedindo-ajuda.html"><i class="fa fa-check"></i><b>3.1</b> Pedindo Ajuda</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="3-1-pedindo-ajuda.html"><a href="3-1-pedindo-ajuda.html#documentação-do-r"><i class="fa fa-check"></i><b>3.1.1</b> Documentação do R</a></li>
<li class="chapter" data-level="3.1.2" data-path="3-1-pedindo-ajuda.html"><a href="3-1-pedindo-ajuda.html#google"><i class="fa fa-check"></i><b>3.1.2</b> Google</a></li>
<li class="chapter" data-level="3.1.3" data-path="3-1-pedindo-ajuda.html"><a href="3-1-pedindo-ajuda.html#stack-overflow"><i class="fa fa-check"></i><b>3.1.3</b> Stack Overflow</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="3-2-r-como-calculadora.html"><a href="3-2-r-como-calculadora.html"><i class="fa fa-check"></i><b>3.2</b> R como calculadora</a>
<ul>
<li class="chapter" data-level="" data-path="3-2-r-como-calculadora.html"><a href="3-2-r-como-calculadora.html#exercícios"><i class="fa fa-check"></i>Exercícios</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="3-3-objetosFuncoes.html"><a href="3-3-objetosFuncoes.html"><i class="fa fa-check"></i><b>3.3</b> Objetos e funções</a>
<ul>
<li class="chapter" data-level="" data-path="3-3-objetosFuncoes.html"><a href="3-3-objetosFuncoes.html#exercícios-1"><i class="fa fa-check"></i>Exercícios</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="3-4-data-frames.html"><a href="3-4-data-frames.html"><i class="fa fa-check"></i><b>3.4</b> Data frames</a></li>
<li class="chapter" data-level="3.5" data-path="3-5-classes.html"><a href="3-5-classes.html"><i class="fa fa-check"></i><b>3.5</b> Classes</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="3-5-classes.html"><a href="3-5-classes.html#exercícios-2"><i class="fa fa-check"></i><b>3.5.1</b> Exercícios</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="3-6-vetores.html"><a href="3-6-vetores.html"><i class="fa fa-check"></i><b>3.6</b> Vetores</a>
<ul>
<li class="chapter" data-level="" data-path="3-6-vetores.html"><a href="3-6-vetores.html#exercícios-3"><i class="fa fa-check"></i>Exercícios</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="3-7-testes-lógicos.html"><a href="3-7-testes-lógicos.html"><i class="fa fa-check"></i><b>3.7</b> Testes lógicos</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="3-7-testes-lógicos.html"><a href="3-7-testes-lógicos.html#exercícios-4"><i class="fa fa-check"></i><b>3.7.1</b> Exercícios</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="3-8-valoresEspeciais.html"><a href="3-8-valoresEspeciais.html"><i class="fa fa-check"></i><b>3.8</b> Valores especiais</a>
<ul>
<li class="chapter" data-level="" data-path="3-8-valoresEspeciais.html"><a href="3-8-valoresEspeciais.html#exercícios-5"><i class="fa fa-check"></i>Exercícios</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="3-9-listas.html"><a href="3-9-listas.html"><i class="fa fa-check"></i><b>3.9</b> Listas</a></li>
<li class="chapter" data-level="3.10" data-path="3-10-mais-sobre-data-frames.html"><a href="3-10-mais-sobre-data-frames.html"><i class="fa fa-check"></i><b>3.10</b> Mais sobre data frames</a>
<ul>
<li class="chapter" data-level="" data-path="3-10-mais-sobre-data-frames.html"><a href="3-10-mais-sobre-data-frames.html#exercícios-6"><i class="fa fa-check"></i>Exercícios</a></li>
</ul></li>
<li class="chapter" data-level="3.11" data-path="3-11-maisFuncoes.html"><a href="3-11-maisFuncoes.html"><i class="fa fa-check"></i><b>3.11</b> Mais sobre funções</a>
<ul>
<li class="chapter" data-level="" data-path="3-11-maisFuncoes.html"><a href="3-11-maisFuncoes.html#exercícios-7"><i class="fa fa-check"></i>Exercícios</a></li>
</ul></li>
<li class="chapter" data-level="3.12" data-path="3-12-controle-de-fluxo.html"><a href="3-12-controle-de-fluxo.html"><i class="fa fa-check"></i><b>3.12</b> Controle de Fluxo</a>
<ul>
<li class="chapter" data-level="3.12.1" data-path="3-12-controle-de-fluxo.html"><a href="3-12-controle-de-fluxo.html#condicionamento-if-e-else"><i class="fa fa-check"></i><b>3.12.1</b> Condicionamento: if e else</a></li>
<li class="chapter" data-level="3.12.2" data-path="3-12-controle-de-fluxo.html"><a href="3-12-controle-de-fluxo.html#iteradores-for-e-while"><i class="fa fa-check"></i><b>3.12.2</b> Iteradores: for e while</a></li>
<li class="chapter" data-level="" data-path="3-12-controle-de-fluxo.html"><a href="3-12-controle-de-fluxo.html#exercícios-8"><i class="fa fa-check"></i>Exercícios</a></li>
</ul></li>
<li class="chapter" data-level="3.13" data-path="3-13-outros-tópicos.html"><a href="3-13-outros-tópicos.html"><i class="fa fa-check"></i><b>3.13</b> Outros tópicos</a>
<ul>
<li class="chapter" data-level="3.13.1" data-path="3-13-outros-tópicos.html"><a href="3-13-outros-tópicos.html#matrizes"><i class="fa fa-check"></i><b>3.13.1</b> Matrizes</a></li>
<li class="chapter" data-level="3.13.2" data-path="3-13-outros-tópicos.html"><a href="3-13-outros-tópicos.html#fatores"><i class="fa fa-check"></i><b>3.13.2</b> Fatores</a></li>
<li class="chapter" data-level="3.13.3" data-path="3-13-outros-tópicos.html"><a href="3-13-outros-tópicos.html#gráficos-r-base"><i class="fa fa-check"></i><b>3.13.3</b> Gráficos (R base)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="4-pacotes.html"><a href="4-pacotes.html"><i class="fa fa-check"></i><b>4</b> Pacotes</a>
<ul>
<li class="chapter" data-level="4.1" data-path="4-1-instalação-de-pacotes.html"><a href="4-1-instalação-de-pacotes.html"><i class="fa fa-check"></i><b>4.1</b> Instalação de pacotes</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="4-1-instalação-de-pacotes.html"><a href="4-1-instalação-de-pacotes.html#via-cran"><i class="fa fa-check"></i><b>4.1.1</b> Via CRAN</a></li>
<li class="chapter" data-level="4.1.2" data-path="4-1-instalação-de-pacotes.html"><a href="4-1-instalação-de-pacotes.html#via-github"><i class="fa fa-check"></i><b>4.1.2</b> Via Github</a></li>
<li class="chapter" data-level="4.1.3" data-path="4-1-instalação-de-pacotes.html"><a href="4-1-instalação-de-pacotes.html#via-arquivo-.zip-ou-.tar.gz"><i class="fa fa-check"></i><b>4.1.3</b> Via arquivo .zip ou .tar.gz</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="4-2-tidyverse.html"><a href="4-2-tidyverse.html"><i class="fa fa-check"></i><b>4.2</b> Tidyverse</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="5-importacao.html"><a href="5-importacao.html"><i class="fa fa-check"></i><b>5</b> Importação</a>
<ul>
<li class="chapter" data-level="5.1" data-path="5-1-caminhos.html"><a href="5-1-caminhos.html"><i class="fa fa-check"></i><b>5.1</b> Caminhos</a></li>
<li class="chapter" data-level="5.2" data-path="5-2-readr.html"><a href="5-2-readr.html"><i class="fa fa-check"></i><b>5.2</b> O pacote readr</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="5-2-readr.html"><a href="5-2-readr.html#lendo-arquivos-de-texto"><i class="fa fa-check"></i><b>5.2.1</b> Lendo arquivos de texto</a></li>
<li class="chapter" data-level="5.2.2" data-path="5-2-readr.html"><a href="5-2-readr.html#locale"><i class="fa fa-check"></i><b>5.2.2</b> Locale</a></li>
<li class="chapter" data-level="5.2.3" data-path="5-2-readr.html"><a href="5-2-readr.html#parseando-valores"><i class="fa fa-check"></i><b>5.2.3</b> Parseando valores</a></li>
<li class="chapter" data-level="5.2.4" data-path="5-2-readr.html"><a href="5-2-readr.html#escrevendo-arquivos-de-texto"><i class="fa fa-check"></i><b>5.2.4</b> Escrevendo arquivos de texto</a></li>
<li class="chapter" data-level="5.2.5" data-path="5-2-readr.html"><a href="5-2-readr.html#arquivos-.rds"><i class="fa fa-check"></i><b>5.2.5</b> Arquivos .rds</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="5-3-readxl.html"><a href="5-3-readxl.html"><i class="fa fa-check"></i><b>5.3</b> Os pacotes readxl e writexl</a></li>
<li class="chapter" data-level="5.4" data-path="5-4-haven.html"><a href="5-4-haven.html"><i class="fa fa-check"></i><b>5.4</b> haven</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="6-pipe.html"><a href="6-pipe.html"><i class="fa fa-check"></i><b>6</b> Pipe</a>
<ul>
<li class="chapter" data-level="6.1" data-path="6-1-o-operador-pipe.html"><a href="6-1-o-operador-pipe.html"><i class="fa fa-check"></i><b>6.1</b> O operador pipe</a></li>
<li class="chapter" data-level="6.2" data-path="6-2-outros-operadores.html"><a href="6-2-outros-operadores.html"><i class="fa fa-check"></i><b>6.2</b> Outros operadores</a></li>
<li class="chapter" data-level="6.3" data-path="6-3-exercícios-10.html"><a href="6-3-exercícios-10.html"><i class="fa fa-check"></i><b>6.3</b> Exercícios</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="7-manipulacao.html"><a href="7-manipulacao.html"><i class="fa fa-check"></i><b>7</b> Manipulação</a>
<ul>
<li class="chapter" data-level="7.1" data-path="7-1-tibbles.html"><a href="7-1-tibbles.html"><i class="fa fa-check"></i><b>7.1</b> Tibbles</a></li>
<li class="chapter" data-level="7.2" data-path="7-2-dplyr.html"><a href="7-2-dplyr.html"><i class="fa fa-check"></i><b>7.2</b> O pacote dplyr</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="7-2-dplyr.html"><a href="7-2-dplyr.html#filtrando-linhas"><i class="fa fa-check"></i><b>7.2.1</b> Filtrando linhas</a></li>
<li class="chapter" data-level="7.2.2" data-path="7-2-dplyr.html"><a href="7-2-dplyr.html#selecionando-colunas"><i class="fa fa-check"></i><b>7.2.2</b> Selecionando colunas</a></li>
<li class="chapter" data-level="7.2.3" data-path="7-2-dplyr.html"><a href="7-2-dplyr.html#ordenando-a-base"><i class="fa fa-check"></i><b>7.2.3</b> Ordenando a base</a></li>
<li class="chapter" data-level="7.2.4" data-path="7-2-dplyr.html"><a href="7-2-dplyr.html#criando-e-modificando-colunas"><i class="fa fa-check"></i><b>7.2.4</b> Criando e modificando colunas</a></li>
<li class="chapter" data-level="7.2.5" data-path="7-2-dplyr.html"><a href="7-2-dplyr.html#summarisando-a-base"><i class="fa fa-check"></i><b>7.2.5</b> Summarisando a base</a></li>
<li class="chapter" data-level="7.2.6" data-path="7-2-dplyr.html"><a href="7-2-dplyr.html#juntando-duas-bases"><i class="fa fa-check"></i><b>7.2.6</b> Juntando duas bases</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="7-3-tidyr.html"><a href="7-3-tidyr.html"><i class="fa fa-check"></i><b>7.3</b> O pacote tidyr</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="7-3-tidyr.html"><a href="7-3-tidyr.html#gather"><i class="fa fa-check"></i><b>7.3.1</b> <code>gather()</code></a></li>
<li class="chapter" data-level="7.3.2" data-path="7-3-tidyr.html"><a href="7-3-tidyr.html#spread"><i class="fa fa-check"></i><b>7.3.2</b> <code>spread()</code></a></li>
<li class="chapter" data-level="7.3.3" data-path="7-3-tidyr.html"><a href="7-3-tidyr.html#outras-funções-do-tidyr"><i class="fa fa-check"></i><b>7.3.3</b> Outras funções do <code>tidyr</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="8-graficos.html"><a href="8-graficos.html"><i class="fa fa-check"></i><b>8</b> Gráficos</a>
<ul>
<li class="chapter" data-level="8.1" data-path="8-1-o-pacote-ggplot2.html"><a href="8-1-o-pacote-ggplot2.html"><i class="fa fa-check"></i><b>8.1</b> O pacote ggplot2</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="8-1-o-pacote-ggplot2.html"><a href="8-1-o-pacote-ggplot2.html#as-camadas-de-um-gráfico"><i class="fa fa-check"></i><b>8.1.1</b> As camadas de um gráfico</a></li>
<li class="chapter" data-level="8.1.2" data-path="8-1-o-pacote-ggplot2.html"><a href="8-1-o-pacote-ggplot2.html#atributos-estéticos"><i class="fa fa-check"></i><b>8.1.2</b> Atributos estéticos</a></li>
<li class="chapter" data-level="8.1.3" data-path="8-1-o-pacote-ggplot2.html"><a href="8-1-o-pacote-ggplot2.html#formas-geométricas"><i class="fa fa-check"></i><b>8.1.3</b> Formas geométricas</a></li>
<li class="chapter" data-level="8.1.4" data-path="8-1-o-pacote-ggplot2.html"><a href="8-1-o-pacote-ggplot2.html#juntando-gráficos"><i class="fa fa-check"></i><b>8.1.4</b> Juntando gráficos</a></li>
<li class="chapter" data-level="8.1.5" data-path="8-1-o-pacote-ggplot2.html"><a href="8-1-o-pacote-ggplot2.html#personalizando"><i class="fa fa-check"></i><b>8.1.5</b> Personalizando</a></li>
<li class="chapter" data-level="8.1.6" data-path="8-1-o-pacote-ggplot2.html"><a href="8-1-o-pacote-ggplot2.html#onde-continuar-estudando"><i class="fa fa-check"></i><b>8.1.6</b> Onde continuar estudando?</a></li>
<li class="chapter" data-level="8.1.7" data-path="8-1-o-pacote-ggplot2.html"><a href="8-1-o-pacote-ggplot2.html#exercícios-11"><i class="fa fa-check"></i><b>8.1.7</b> Exercícios</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="8-2-o-pacote-plotly.html"><a href="8-2-o-pacote-plotly.html"><i class="fa fa-check"></i><b>8.2</b> O pacote plotly</a></li>
<li class="chapter" data-level="8.3" data-path="8-3-extensões-do-ggplot2.html"><a href="8-3-extensões-do-ggplot2.html"><i class="fa fa-check"></i><b>8.3</b> Extensões do ggplot2</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="9-funcionais.html"><a href="9-funcionais.html"><i class="fa fa-check"></i><b>9</b> Funcionais</a></li>
<li class="chapter" data-level="10" data-path="10-misc.html"><a href="10-misc.html"><i class="fa fa-check"></i><b>10</b> Miscelânea</a>
<ul>
<li class="chapter" data-level="10.1" data-path="10-1-arrumando-banco-de-dados-o-pacote-janitor.html"><a href="10-1-arrumando-banco-de-dados-o-pacote-janitor.html"><i class="fa fa-check"></i><b>10.1</b> Arrumando banco de dados: o pacote janitor</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="10-1-arrumando-banco-de-dados-o-pacote-janitor.html"><a href="10-1-arrumando-banco-de-dados-o-pacote-janitor.html#arrumando-o-nome-das-variáveis"><i class="fa fa-check"></i><b>10.1.1</b> Arrumando o nome das variáveis</a></li>
<li class="chapter" data-level="10.1.2" data-path="10-1-arrumando-banco-de-dados-o-pacote-janitor.html"><a href="10-1-arrumando-banco-de-dados-o-pacote-janitor.html#removendo-linhas-e-colunas-vazias"><i class="fa fa-check"></i><b>10.1.2</b> Removendo linhas e colunas vazias</a></li>
<li class="chapter" data-level="10.1.3" data-path="10-1-arrumando-banco-de-dados-o-pacote-janitor.html"><a href="10-1-arrumando-banco-de-dados-o-pacote-janitor.html#identificando-linhas-duplicadas"><i class="fa fa-check"></i><b>10.1.3</b> Identificando linhas duplicadas</a></li>
<li class="chapter" data-level="10.1.4" data-path="10-1-arrumando-banco-de-dados-o-pacote-janitor.html"><a href="10-1-arrumando-banco-de-dados-o-pacote-janitor.html#outras-funções"><i class="fa fa-check"></i><b>10.1.4</b> Outras funções</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="11-respostas.html"><a href="11-respostas.html"><i class="fa fa-check"></i><b>11</b> Respostas</a>
<ul>
<li class="chapter" data-level="11.1" data-path="11-1-r-básico.html"><a href="11-1-r-básico.html"><i class="fa fa-check"></i><b>11.1</b> R básico</a>
<ul>
<li class="chapter" data-level="" data-path="11-1-r-básico.html"><a href="11-1-r-básico.html#r-como-calculadora-1"><i class="fa fa-check"></i>R como calculadora</a></li>
<li class="chapter" data-level="" data-path="11-1-r-básico.html"><a href="11-1-r-básico.html#objetos-e-funções"><i class="fa fa-check"></i>Objetos e funções</a></li>
<li class="chapter" data-level="" data-path="11-1-r-básico.html"><a href="11-1-r-básico.html#classes-1"><i class="fa fa-check"></i>Classes</a></li>
<li class="chapter" data-level="" data-path="11-1-r-básico.html"><a href="11-1-r-básico.html#vetores-1"><i class="fa fa-check"></i>Vetores</a></li>
<li class="chapter" data-level="11.1.1" data-path="11-1-r-básico.html"><a href="11-1-r-básico.html#testes-lógicos-1"><i class="fa fa-check"></i><b>11.1.1</b> Testes lógicos</a></li>
<li class="chapter" data-level="11.1.2" data-path="11-1-r-básico.html"><a href="11-1-r-básico.html#data-frames-1"><i class="fa fa-check"></i><b>11.1.2</b> Data frames</a></li>
<li class="chapter" data-level="11.1.3" data-path="11-1-r-básico.html"><a href="11-1-r-básico.html#mais-sobre-funções"><i class="fa fa-check"></i><b>11.1.3</b> Mais sobre funções</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="11-2-pipe-1.html"><a href="11-2-pipe-1.html"><i class="fa fa-check"></i><b>11.2</b> Pipe</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="referências.html"><a href="referências.html"><i class="fa fa-check"></i>Referências</a>
<ul>
<li class="chapter" data-level="" data-path="referências.html"><a href="referências.html#allison-horst"><i class="fa fa-check"></i>Allison Horst</a></li>
<li class="chapter" data-level="" data-path="referências.html"><a href="referências.html#programação-em-r"><i class="fa fa-check"></i>Programação em R</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Publicado com bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Ciência de Dados em R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="o-pacote-ggplot2" class="section level2" number="8.1">
<h2><span class="header-section-number">8.1</span> O pacote ggplot2</h2>
<p>A construção de gráficos no R foi revolucionada com a criação do pacote <code>ggplot2</code>, fruto da tese de doutorado de <a href="https://github.com/hadley">Hadley Wickham</a>. Essa revolução teve base na filosofia adotada por Hadley ao definir o que deveria ser um gráfico estatístico.</p>
<p>Mas será que podemos definir formalmente o que é um gráfico estatístico? Graças ao estatístico norte-americano Leland Wilkinson, a resposta é sim.</p>
<p>Em 2005, Leland publicou o livro <a href="http://www.springer.com/statistics/computational+statistics/book/978-0-387-24544-7"><em>The Grammar of graphics</em></a>, uma fonte de princípios fundamentais para a construção de gráficos estatísticos. No livro, ele defende que um gráfico é o mapeamento dos dados a partir de atributos estéticos (posição, cor, forma, tamanho) de objetos geométricos (pontos, linhas, barras, caixas).</p>
<p>A partir dessa definição, Hadley escreveu <a href="http://vita.had.co.nz/papers/layered-grammar.html">A Layered Grammar of Graphics</a>, sugerindo que os principais aspectos de um gráfico (dados, sistema de coordenadas, rótulos e anotações) podiam ser divididos em camadas, construídas uma a uma na elaboração do gráfico. Essa é a essência do <code>ggplot2</code>.</p>
<p>Além de uma filosofia bem fundamentada, o <code>ggplot2</code> ainda traz outras vantagens em relação aos gráficos do r base:</p>
<ul>
<li>gráficos naturalmente mais bonitos;</li>
<li>muito mais fácil deixar o gráfico do jeito que você quer;</li>
<li>a estrutura padronizada das funções deixa o aprendizado muito mais intuitivo; e</li>
<li>é possível criar uma imensa gama de gráficos com poucas linhas de código.</li>
</ul>
<p>Para discutir os principais aspectos da construção de gráficos com o <code>ggplot2</code>, vamos continuar utilizando a base de filmes do IMDB apresentada na <a href="https://www.curso-r.com/material/manipulacao/">seção de manipulação</a>. Você pode baixá-la <a href="https://github.com/curso-r/site-v2/raw/master/content/material/importacao/data/imdb.rds">clicando aqui</a>.</p>
<p>Na próxima seção, vamos conhecer as principais funções do <code>ggplot2</code> e começar a construir nossos primeiros gráficos. Não se esqueça de instalar e carregar o pacote antes de rodar os exemplos.</p>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb280-1"><a href="8-1-o-pacote-ggplot2.html#cb280-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;ggplot2&quot;</span>)</span>
<span id="cb280-2"><a href="8-1-o-pacote-ggplot2.html#cb280-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code></pre></div>
<div id="as-camadas-de-um-gráfico" class="section level3" number="8.1.1">
<h3><span class="header-section-number">8.1.1</span> As camadas de um gráfico</h3>
<p>No <code>ggplot2</code>, os gráficos são construídos camada por camada, sendo a primeira delas dada pela função <code>ggplot()</code> (repare que não tem o “2”). Essa função recebe um data frame e cria a camada base do gráfico. Se rodarmos apenas a função <code>ggplot()</code>, obteremos um painel em branco.</p>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb281-1"><a href="8-1-o-pacote-ggplot2.html#cb281-1" aria-hidden="true" tabindex="-1"></a>imdb <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_rds</span>(<span class="st">&quot;assets/data/imdb.rds&quot;</span>)</span>
<span id="cb281-2"><a href="8-1-o-pacote-ggplot2.html#cb281-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> imdb)</span></code></pre></div>
<p><img src="08-graficos_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>Apesar de termos passados os dados para a função, precisamos especificar como as observações serão mapeadas nos aspectos visuais do gráfico e quais formas geométricas serão utilizadas para isso. Cada camada do gráfico representará um tipo de mapeamento ou personalização.</p>
<p>O código abaixo constrói um gráfico de dispersão entre as variáveis orçamento e receita.</p>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb282-1"><a href="8-1-o-pacote-ggplot2.html#cb282-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(imdb) <span class="sc">+</span></span>
<span id="cb282-2"><a href="8-1-o-pacote-ggplot2.html#cb282-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> orcamento, <span class="at">y =</span> receita))</span></code></pre></div>
<pre><code>## Warning: Removed 733 rows containing missing values (geom_point).</code></pre>
<p><img src="08-graficos_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>Observe que:</p>
<ul>
<li>como vimos, a primeira camada é dada pela função <code>ggplot()</code> e recebe um data frame;</li>
<li>a segunda camada é dada pela função <code>geom_point()</code>, especificando a forma <strong>geom</strong>étrica utilizada no mapeamento das observações;</li>
<li>as camadas são unidas com um <code>+</code>;</li>
<li>o mapeamento na função <code>geom_point()</code> recebe a função <code>aes()</code>, responsável por descrever como as variáveis serão mapeadas nos aspectos visuais da forma geométrica escolhida, no caso, pontos.</li>
</ul>
<p>A combinação da função <code>ggplot()</code> e de uma ou mais funções <code>geom_()</code> definirá o tipo de gráfico gerado.</p>
<p><strong>Atenção!</strong> As camadas dos gráficos são empilhadas utilizando-se o sinal <code>+</code>. Como a estrutura é muito parecida com uma pipe line, é comum trocarmos o <code>+</code> por um <code>%&gt;%</code> no meio do código, resultando em erro.</p>
<p>Podemos acrescentar uma terceira camada ao gráfico, gerando a reta <code>y = x</code> para visualizarmos os filmes não se pagaram.</p>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb284-1"><a href="8-1-o-pacote-ggplot2.html#cb284-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(imdb) <span class="sc">+</span></span>
<span id="cb284-2"><a href="8-1-o-pacote-ggplot2.html#cb284-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> orcamento, <span class="at">y =</span> receita)) <span class="sc">+</span></span>
<span id="cb284-3"><a href="8-1-o-pacote-ggplot2.html#cb284-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept =</span> <span class="dv">0</span>, <span class="at">slope =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<pre><code>## Warning: Removed 733 rows containing missing values (geom_point).</code></pre>
<p><img src="08-graficos_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>Assim, os pontos abaixo da reta representam os filmes com orçamento maior que a receita, isto é, aqueles que deram prejuízo.</p>
<p>Em vez de utilizarmos a reta <code>y = x</code>, podemos pintar os pontos que deram lucro e prejuízo de cores diferentes.</p>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb286-1"><a href="8-1-o-pacote-ggplot2.html#cb286-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="8-1-o-pacote-ggplot2.html#cb290-1" aria-hidden="true" tabindex="-1"></a>imdb <span class="sc">%&gt;%</span></span>
<span id="cb290-2"><a href="8-1-o-pacote-ggplot2.html#cb290-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(</span>
<span id="cb290-3"><a href="8-1-o-pacote-ggplot2.html#cb290-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">lucro =</span> receita <span class="sc">-</span> orcamento,</span>
<span id="cb290-4"><a href="8-1-o-pacote-ggplot2.html#cb290-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">lucro =</span> <span class="fu">ifelse</span>(lucro <span class="sc">&lt;=</span> <span class="dv">0</span>, <span class="st">&quot;Não&quot;</span>, <span class="st">&quot;Sim&quot;</span>)</span>
<span id="cb290-5"><a href="8-1-o-pacote-ggplot2.html#cb290-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb290-6"><a href="8-1-o-pacote-ggplot2.html#cb290-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(lucro)) <span class="sc">%&gt;%</span> </span>
<span id="cb290-7"><a href="8-1-o-pacote-ggplot2.html#cb290-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb290-8"><a href="8-1-o-pacote-ggplot2.html#cb290-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> orcamento, <span class="at">y =</span> receita, <span class="at">color =</span> lucro))</span></code></pre></div>
<p><img src="08-graficos_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>Aqui temos dois pontos importantes:</p>
<ol style="list-style-type: decimal">
<li><p>Unimos uma primeira parte de manipulação, utilizando as funções <code>filter()</code> e <code>mutate()</code>, com o código do gráfico. Essa etapa inicial de transformação da base é muito comum na construção de gráficos.</p></li>
<li><p>A cor dos pontos foi alterada por meio do atributo <code>color=</code>, dentro da função <code>aes()</code>.</p></li>
</ol>
<p>Também podemos adicionar uma camada especificando os textos que representam cada atributo. Para isso, usamos a função <code>labs()</code>.</p>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb291-1"><a href="8-1-o-pacote-ggplot2.html#cb291-1" aria-hidden="true" tabindex="-1"></a>imdb <span class="sc">%&gt;%</span></span>
<span id="cb291-2"><a href="8-1-o-pacote-ggplot2.html#cb291-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb291-3"><a href="8-1-o-pacote-ggplot2.html#cb291-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">lucro =</span> receita <span class="sc">-</span> orcamento,</span>
<span id="cb291-4"><a href="8-1-o-pacote-ggplot2.html#cb291-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">lucro =</span> <span class="fu">ifelse</span>(lucro <span class="sc">&lt;=</span> <span class="dv">0</span>, <span class="st">&quot;Não&quot;</span>, <span class="st">&quot;Sim&quot;</span>)</span>
<span id="cb291-5"><a href="8-1-o-pacote-ggplot2.html#cb291-5" aria-hidden="true" tabindex="-1"></a>  )  <span class="sc">%&gt;%</span></span>
<span id="cb291-6"><a href="8-1-o-pacote-ggplot2.html#cb291-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(lucro)) <span class="sc">%&gt;%</span> </span>
<span id="cb291-7"><a href="8-1-o-pacote-ggplot2.html#cb291-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb291-8"><a href="8-1-o-pacote-ggplot2.html#cb291-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> orcamento, <span class="at">y =</span> receita, <span class="at">color =</span> lucro)) <span class="sc">+</span></span>
<span id="cb291-9"><a href="8-1-o-pacote-ggplot2.html#cb291-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Orçamento&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Arrecadação&quot;</span>, <span class="at">color =</span> <span class="st">&quot;Houve lucro?&quot;</span>) </span></code></pre></div>
<p><img src="08-graficos_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>No ggplot, nós modificamos um gráfico alterando e acrescentando camadas. Agora que você já sabe como essa estrutura funciona, vamos estudar com mais atenção para que serve a função <code>aes()</code>.</p>
</div>
<div id="atributos-estéticos" class="section level3" number="8.1.2">
<h3><span class="header-section-number">8.1.2</span> Atributos estéticos</h3>
<p>O papel da função <code>aes()</code> (de <em>aesthetics</em>, estética em inglês) é indicar a relação entre os dados e cada aspecto visual do gráfico, como qual variável será representada no eixo x, qual será representada no eixo y, a cor e o tamanho dos componentes geométricos etc. Os aspectos que podem ou devem ser mapeados depende do tipo de gráfico que você está construindo.</p>
<p>Segue abaixo uma lista dos aspectos visuais mais utilizados:</p>
<ul>
<li><code>color=</code>: altera a cor de formas que não têm área (pontos e retas).</li>
<li><code>fill=</code>: altera a cor de formas com área (barras, caixas, densidades, áreas).</li>
<li><code>size=</code>: altera o tamanho de formas.</li>
<li><code>type=</code>: altera o tipo da forma, geralmente usada para pontos.</li>
<li><code>linetype=</code>: altera o tipo da linha.</li>
</ul>
<p>Um erro comum na hora de definir atributos estéticos de um gráfico é utilizar a função <code>aes()</code> de forma errada. Repare o que acontece quando tentamos definir diretamente a cor dos pontos dentro dessa função.</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="8-1-o-pacote-ggplot2.html#cb292-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(imdb) <span class="sc">+</span></span>
<span id="cb292-2"><a href="8-1-o-pacote-ggplot2.html#cb292-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> orcamento, <span class="at">y =</span> receita, <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>))</span></code></pre></div>
<pre><code>## Warning: Removed 733 rows containing missing values (geom_point).</code></pre>
<p><img src="08-graficos_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>Estranho, não? O que aconteceu foi o seguinte: a função <code>aes()</code> espera uma variável para ser mapeada a cada atributo, então o valor <code>blue</code> é tratado como uma nova variável/coluna que tem essa string para todas as observações. Assim, todos pontos têm a mesma cor (vermelha, padrão do ggplot) pois pertencem todos à essa “categoria ‘blue’”.</p>
<p>No caso, o que gostaríamos é de ter pintado todos os pontos de azul. A forma certa de fazer isso é colocando o atributo <code>color=</code> fora da função <code>aes()</code>:</p>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="8-1-o-pacote-ggplot2.html#cb294-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(imdb) <span class="sc">+</span></span>
<span id="cb294-2"><a href="8-1-o-pacote-ggplot2.html#cb294-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> orcamento, <span class="at">y =</span> receita), <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>)</span></code></pre></div>
<pre><code>## Warning: Removed 733 rows containing missing values (geom_point).</code></pre>
<p><img src="08-graficos_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p>Vamos agora explorar novos gráficos a partir da família de funções <code>geom_()</code>.</p>
</div>
<div id="formas-geométricas" class="section level3" number="8.1.3">
<h3><span class="header-section-number">8.1.3</span> Formas geométricas</h3>
<p>Os <em>geoms</em> definem qual forma geométrica será utilizada para a visualização das observações. Como já vimos, a função <code>geom_point()</code> gera gráficos de dispersão
transformando pares <span class="math inline">\((x,y)\)</span> em pontos. Veja a seguir outros <em>geoms</em> bastante utilizados:</p>
<ul>
<li><code>geom_line</code> - para linhas definidas por pares (x,y).</li>
<li><code>geom_abline</code> - para retas definidas por um intercepto e uma inclinação.</li>
<li><code>geom_hline</code> - para retas horizontais.</li>
<li><code>geom_bar</code> - para barras.</li>
<li><code>geom_histogram</code> - para histogramas.</li>
<li><code>geom_boxplot</code> - para boxplots.</li>
<li><code>geom_density</code> - para densidades.</li>
<li><code>geom_area</code> - para áreas.</li>
</ul>
<p>Veja a seguir como é fácil gerar diversos gráficos diferentes utilizando a mesma estrutura do gráfico de dispersão acima:</p>
<div id="linhas" class="section level4" number="8.1.3.1">
<h4><span class="header-section-number">8.1.3.1</span> Linhas</h4>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="8-1-o-pacote-ggplot2.html#cb296-1" aria-hidden="true" tabindex="-1"></a>imdb <span class="sc">%&gt;%</span> </span>
<span id="cb296-2"><a href="8-1-o-pacote-ggplot2.html#cb296-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(diretor <span class="sc">==</span> <span class="st">&quot;Steven Spielberg&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb296-3"><a href="8-1-o-pacote-ggplot2.html#cb296-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ano) <span class="sc">%&gt;%</span> </span>
<span id="cb296-4"><a href="8-1-o-pacote-ggplot2.html#cb296-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">nota_media =</span> <span class="fu">mean</span>(nota_imdb, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb296-5"><a href="8-1-o-pacote-ggplot2.html#cb296-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb296-6"><a href="8-1-o-pacote-ggplot2.html#cb296-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> ano, <span class="at">y =</span> nota_media))</span></code></pre></div>
<p><img src="08-graficos_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
</div>
<div id="histograma-1" class="section level4" number="8.1.3.2">
<h4><span class="header-section-number">8.1.3.2</span> Histograma</h4>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="8-1-o-pacote-ggplot2.html#cb297-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(imdb) <span class="sc">+</span> </span>
<span id="cb297-2"><a href="8-1-o-pacote-ggplot2.html#cb297-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x =</span> orcamento), <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;white&quot;</span>)</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<pre><code>## Warning: Removed 298 rows containing non-finite values (stat_bin).</code></pre>
<p><img src="08-graficos_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p>Enquanto o gráfico e dispersão demandam o mapeamento das posições x e y, o histograma requer apenas a posição x, já que, pela definição do gráfico, o eixo mostra a frequência de cada classe.</p>
</div>
<div id="boxplot-1" class="section level4" number="8.1.3.3">
<h4><span class="header-section-number">8.1.3.3</span> Boxplot</h4>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="8-1-o-pacote-ggplot2.html#cb300-1" aria-hidden="true" tabindex="-1"></a>imdb <span class="sc">%&gt;%</span> </span>
<span id="cb300-2"><a href="8-1-o-pacote-ggplot2.html#cb300-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(diretor <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Steven Spielberg&quot;</span>, <span class="st">&quot;Quentin Tarantino&quot;</span>, <span class="st">&quot;Woody Allen&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb300-3"><a href="8-1-o-pacote-ggplot2.html#cb300-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb300-4"><a href="8-1-o-pacote-ggplot2.html#cb300-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> diretor, <span class="at">y =</span> receita))</span></code></pre></div>
<pre><code>## Warning: Removed 4 rows containing non-finite values (stat_boxplot).</code></pre>
<p><img src="08-graficos_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<p>Repare que o boxplot pede uma variável categórica no eixo x.</p>
</div>
<div id="gráfico-de-barras-1" class="section level4" number="8.1.3.4">
<h4><span class="header-section-number">8.1.3.4</span> Gráfico de barras</h4>
<p>Há duas formas de fazer um gráfico de barras. A primeira é utilizando a função <code>geom_bar()</code>, quando queremos que a função conte a frequência de cada categoria.</p>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="8-1-o-pacote-ggplot2.html#cb302-1" aria-hidden="true" tabindex="-1"></a>imdb <span class="sc">%&gt;%</span> </span>
<span id="cb302-2"><a href="8-1-o-pacote-ggplot2.html#cb302-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ano <span class="sc">&gt;</span> <span class="dv">1990</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb302-3"><a href="8-1-o-pacote-ggplot2.html#cb302-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb302-4"><a href="8-1-o-pacote-ggplot2.html#cb302-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> ano), <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;light blue&quot;</span>)</span></code></pre></div>
<p><img src="08-graficos_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<p>Ou a função <code>geom_col()</code>, quando já temos essas contagens.</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="8-1-o-pacote-ggplot2.html#cb303-1" aria-hidden="true" tabindex="-1"></a>imdb <span class="sc">%&gt;%</span> </span>
<span id="cb303-2"><a href="8-1-o-pacote-ggplot2.html#cb303-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(diretor) <span class="sc">%&gt;%</span> </span>
<span id="cb303-3"><a href="8-1-o-pacote-ggplot2.html#cb303-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(diretor)) <span class="sc">%&gt;%</span> </span>
<span id="cb303-4"><a href="8-1-o-pacote-ggplot2.html#cb303-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">top_n</span>(<span class="dv">5</span>, n) <span class="sc">%&gt;%</span></span>
<span id="cb303-5"><a href="8-1-o-pacote-ggplot2.html#cb303-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb303-6"><a href="8-1-o-pacote-ggplot2.html#cb303-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(</span>
<span id="cb303-7"><a href="8-1-o-pacote-ggplot2.html#cb303-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> diretor, <span class="at">y =</span> n), </span>
<span id="cb303-8"><a href="8-1-o-pacote-ggplot2.html#cb303-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, </span>
<span id="cb303-9"><a href="8-1-o-pacote-ggplot2.html#cb303-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;red&quot;</span>, </span>
<span id="cb303-10"><a href="8-1-o-pacote-ggplot2.html#cb303-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">&quot;pink&quot;</span></span>
<span id="cb303-11"><a href="8-1-o-pacote-ggplot2.html#cb303-11" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="08-graficos_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
</div>
</div>
<div id="juntando-gráficos" class="section level3" number="8.1.4">
<h3><span class="header-section-number">8.1.4</span> Juntando gráficos</h3>
<p>No ggplot, temos várias formas de juntar gráficos. Vamos apresentar a seguir as principais.</p>
<div id="vários-geoms-no-mesmo-gráfico" class="section level4" number="8.1.4.1">
<h4><span class="header-section-number">8.1.4.1</span> Vários geoms no mesmo gráfico</h4>
<p>Podemos acrescentar vários geoms em um mesmo gráfico, apenas adicionando novas camadas. No código abaixo, construímos o gráfico de dispersão da receita pelo orçamento dos filmes, acrescentando também uma reta de tendência aos pontos.</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="8-1-o-pacote-ggplot2.html#cb304-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(imdb) <span class="sc">+</span></span>
<span id="cb304-2"><a href="8-1-o-pacote-ggplot2.html#cb304-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> orcamento, <span class="at">y =</span> receita)) <span class="sc">+</span></span>
<span id="cb304-3"><a href="8-1-o-pacote-ggplot2.html#cb304-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="fu">aes</span>(<span class="at">x =</span> orcamento, <span class="at">y =</span> receita), <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">method =</span> <span class="st">&quot;lm&quot;</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<pre><code>## Warning: Removed 733 rows containing non-finite values (stat_smooth).</code></pre>
<pre><code>## Warning: Removed 733 rows containing missing values (geom_point).</code></pre>
<p><img src="08-graficos_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<p>Quando estamos usando mais de um geom, podemos economizar código especificando o <code>aes()</code> diretamente na função <code>ggplot()</code>. O mapeamento então é distribuído para todos os geoms do gráfico.</p>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="8-1-o-pacote-ggplot2.html#cb308-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(imdb, <span class="fu">aes</span>(<span class="at">x =</span> orcamento, <span class="at">y =</span> receita)) <span class="sc">+</span></span>
<span id="cb308-2"><a href="8-1-o-pacote-ggplot2.html#cb308-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb308-3"><a href="8-1-o-pacote-ggplot2.html#cb308-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">method =</span> <span class="st">&quot;lm&quot;</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<pre><code>## Warning: Removed 733 rows containing non-finite values (stat_smooth).</code></pre>
<pre><code>## Warning: Removed 733 rows containing missing values (geom_point).</code></pre>
<p><img src="08-graficos_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<p>Mas você ainda pode usar o <code>aes()</code> dentro dos geoms para especificar mapeamentos específicos.</p>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="8-1-o-pacote-ggplot2.html#cb312-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(imdb, <span class="fu">aes</span>(<span class="at">x =</span> orcamento, <span class="at">y =</span> receita)) <span class="sc">+</span></span>
<span id="cb312-2"><a href="8-1-o-pacote-ggplot2.html#cb312-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> ano)) <span class="sc">+</span></span>
<span id="cb312-3"><a href="8-1-o-pacote-ggplot2.html#cb312-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">method =</span> <span class="st">&quot;lm&quot;</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<pre><code>## Warning: Removed 733 rows containing non-finite values (stat_smooth).</code></pre>
<pre><code>## Warning: Removed 733 rows containing missing values (geom_point).</code></pre>
<p><img src="08-graficos_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
</div>
<div id="replicando-um-gráfico-para-cada-categoria-de-uma-variável" class="section level4" number="8.1.4.2">
<h4><span class="header-section-number">8.1.4.2</span> Replicando um gráfico para cada categoria de uma variável</h4>
<p>Uma funcionalidade muito útil do <code>ggplot2</code> é a possibilidade de usar <code>facets</code> para replicar um gráfico para cada categoria de uma variável.</p>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="8-1-o-pacote-ggplot2.html#cb316-1" aria-hidden="true" tabindex="-1"></a>imdb <span class="sc">%&gt;%</span></span>
<span id="cb316-2"><a href="8-1-o-pacote-ggplot2.html#cb316-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(classificacao <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Livre&quot;</span>, <span class="st">&quot;A partir de 13 anos&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb316-3"><a href="8-1-o-pacote-ggplot2.html#cb316-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb316-4"><a href="8-1-o-pacote-ggplot2.html#cb316-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> orcamento, <span class="at">y =</span> nota_imdb)) <span class="sc">+</span></span>
<span id="cb316-5"><a href="8-1-o-pacote-ggplot2.html#cb316-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>classificacao, <span class="at">nrow =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## Warning: Removed 85 rows containing missing values (geom_point).</code></pre>
<p><img src="08-graficos_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
<p>Repare que usamos uma fórmula para dizer à função qual variável vamos utilizar para quebrar o gráfico. Podemos especificar se queremos os gráficos lado a lado ou um embaixo do outro pelos argumentos <code>nrow=</code> e <code>ncol=</code>.</p>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb318-1"><a href="8-1-o-pacote-ggplot2.html#cb318-1" aria-hidden="true" tabindex="-1"></a>imdb <span class="sc">%&gt;%</span></span>
<span id="cb318-2"><a href="8-1-o-pacote-ggplot2.html#cb318-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(classificacao <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Livre&quot;</span>, <span class="st">&quot;A partir de 13 anos&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb318-3"><a href="8-1-o-pacote-ggplot2.html#cb318-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb318-4"><a href="8-1-o-pacote-ggplot2.html#cb318-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> orcamento, <span class="at">y =</span> nota_imdb)) <span class="sc">+</span></span>
<span id="cb318-5"><a href="8-1-o-pacote-ggplot2.html#cb318-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>classificacao, <span class="at">ncol =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## Warning: Removed 85 rows containing missing values (geom_point).</code></pre>
<p><img src="08-graficos_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<p><strong>Exercício relâmpago!</strong> Pesquise o que faz a função <code>facet_grid()</code>.</p>
</div>
<div id="juntando-gráficos-diferentes" class="section level4" number="8.1.4.3">
<h4><span class="header-section-number">8.1.4.3</span> Juntando gráficos diferentes</h4>
<p>Diversos outros pacotes trazem ferramentas super úteis para trabalharmos com o <code>ggplot2</code>. Um deles é o pacote <code>patchwork</code>. Após carregá-lo, podemos juntar dois gráficos com um simples <code>+</code>.</p>
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb320-1"><a href="8-1-o-pacote-ggplot2.html#cb320-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Instale antes de carregar</span></span>
<span id="cb320-2"><a href="8-1-o-pacote-ggplot2.html#cb320-2" aria-hidden="true" tabindex="-1"></a><span class="co"># devtools::install_github(&quot;thomasp85/patchwork&quot;)</span></span>
<span id="cb320-3"><a href="8-1-o-pacote-ggplot2.html#cb320-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb320-4"><a href="8-1-o-pacote-ggplot2.html#cb320-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb320-5"><a href="8-1-o-pacote-ggplot2.html#cb320-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb320-6"><a href="8-1-o-pacote-ggplot2.html#cb320-6" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> imdb <span class="sc">%&gt;%</span> </span>
<span id="cb320-7"><a href="8-1-o-pacote-ggplot2.html#cb320-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(diretor <span class="sc">==</span> <span class="st">&quot;Steven Spielberg&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb320-8"><a href="8-1-o-pacote-ggplot2.html#cb320-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ano) <span class="sc">%&gt;%</span> </span>
<span id="cb320-9"><a href="8-1-o-pacote-ggplot2.html#cb320-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">nota_media =</span> <span class="fu">mean</span>(nota_imdb, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb320-10"><a href="8-1-o-pacote-ggplot2.html#cb320-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb320-11"><a href="8-1-o-pacote-ggplot2.html#cb320-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> ano, <span class="at">y =</span> nota_media))</span>
<span id="cb320-12"><a href="8-1-o-pacote-ggplot2.html#cb320-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb320-13"><a href="8-1-o-pacote-ggplot2.html#cb320-13" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> imdb <span class="sc">%&gt;%</span> </span>
<span id="cb320-14"><a href="8-1-o-pacote-ggplot2.html#cb320-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">lucro =</span> receita <span class="sc">-</span> orcamento) <span class="sc">%&gt;%</span> </span>
<span id="cb320-15"><a href="8-1-o-pacote-ggplot2.html#cb320-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(diretor <span class="sc">==</span> <span class="st">&quot;Steven Spielberg&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb320-16"><a href="8-1-o-pacote-ggplot2.html#cb320-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb320-17"><a href="8-1-o-pacote-ggplot2.html#cb320-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(</span>
<span id="cb320-18"><a href="8-1-o-pacote-ggplot2.html#cb320-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> lucro),</span>
<span id="cb320-19"><a href="8-1-o-pacote-ggplot2.html#cb320-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>, </span>
<span id="cb320-20"><a href="8-1-o-pacote-ggplot2.html#cb320-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;darkblue&quot;</span>, </span>
<span id="cb320-21"><a href="8-1-o-pacote-ggplot2.html#cb320-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">binwidth =</span> <span class="dv">100000000</span></span>
<span id="cb320-22"><a href="8-1-o-pacote-ggplot2.html#cb320-22" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb320-23"><a href="8-1-o-pacote-ggplot2.html#cb320-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb320-24"><a href="8-1-o-pacote-ggplot2.html#cb320-24" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> p2</span></code></pre></div>
<pre><code>## Warning: Removed 1 rows containing non-finite values (stat_bin).</code></pre>
<p><img src="08-graficos_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
</div>
</div>
<div id="personalizando" class="section level3" number="8.1.5">
<h3><span class="header-section-number">8.1.5</span> Personalizando</h3>
<p>Como exemplo de personalização de um gráfico com o <code>ggplot2</code>, vamos partir de um simples boxplot e fazer diversas alterações no seu visual.</p>
<p>O gráfico inicial é construído da seguinte forma:</p>
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb322-1"><a href="8-1-o-pacote-ggplot2.html#cb322-1" aria-hidden="true" tabindex="-1"></a>imdb <span class="sc">%&gt;%</span> </span>
<span id="cb322-2"><a href="8-1-o-pacote-ggplot2.html#cb322-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(diretor <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Steven Spielberg&quot;</span>, <span class="st">&quot;Quentin Tarantino&quot;</span>, <span class="st">&quot;Woody Allen&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb322-3"><a href="8-1-o-pacote-ggplot2.html#cb322-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb322-4"><a href="8-1-o-pacote-ggplot2.html#cb322-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> diretor, <span class="at">y =</span> receita, <span class="at">fill =</span> diretor))</span></code></pre></div>
<pre><code>## Warning: Removed 4 rows containing non-finite values (stat_boxplot).</code></pre>
<p><img src="08-graficos_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
<div id="removendo-totalmente-a-legenda" class="section level4" number="8.1.5.1">
<h4><span class="header-section-number">8.1.5.1</span> Removendo totalmente a legenda</h4>
<p>Existem diversas maneiras para remover a legenda de um gráfico no <code>ggplot2</code>. A forma mais simples é usar o argumento <code>show.legend = FALSE</code> dentro do geom.</p>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb324-1"><a href="8-1-o-pacote-ggplot2.html#cb324-1" aria-hidden="true" tabindex="-1"></a>imdb <span class="sc">%&gt;%</span> </span>
<span id="cb324-2"><a href="8-1-o-pacote-ggplot2.html#cb324-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(diretor <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Steven Spielberg&quot;</span>, <span class="st">&quot;Quentin Tarantino&quot;</span>, <span class="st">&quot;Woody Allen&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb324-3"><a href="8-1-o-pacote-ggplot2.html#cb324-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb324-4"><a href="8-1-o-pacote-ggplot2.html#cb324-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> diretor, <span class="at">y =</span> receita, <span class="at">fill =</span> diretor), <span class="at">show.legend =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## Warning: Removed 4 rows containing non-finite values (stat_boxplot).</code></pre>
<p><img src="08-graficos_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
</div>
<div id="mexendo-na-escala" class="section level4" number="8.1.5.2">
<h4><span class="header-section-number">8.1.5.2</span> Mexendo na escala</h4>
<p>Para mudar qualquer aspecto estético da escala, usamos a família de funções <code>scale_()</code>. No caso, vamos deixar a escala do eixo y no formato de dólares.</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="8-1-o-pacote-ggplot2.html#cb326-1" aria-hidden="true" tabindex="-1"></a>imdb <span class="sc">%&gt;%</span> </span>
<span id="cb326-2"><a href="8-1-o-pacote-ggplot2.html#cb326-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(diretor <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Steven Spielberg&quot;</span>, <span class="st">&quot;Quentin Tarantino&quot;</span>, <span class="st">&quot;Woody Allen&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb326-3"><a href="8-1-o-pacote-ggplot2.html#cb326-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb326-4"><a href="8-1-o-pacote-ggplot2.html#cb326-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> diretor, <span class="at">y =</span> receita, <span class="at">fill =</span> diretor), <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb326-5"><a href="8-1-o-pacote-ggplot2.html#cb326-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar)</span></code></pre></div>
<pre><code>## Warning: Removed 4 rows containing non-finite values (stat_boxplot).</code></pre>
<p><img src="08-graficos_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
<p>Repare que para cada tipo de atributo, existe uma função <code>scale_()</code> correspondente.</p>
</div>
<div id="alterando-a-ordem-das-categorias" class="section level4" number="8.1.5.3">
<h4><span class="header-section-number">8.1.5.3</span> Alterando a ordem das categorias</h4>
<p>Para alterar a ordem que as categorias de uma variável aparecem no gráfico, podemos utilizar o argumento <code>breaks=</code> da função <code>scale_()</code>.</p>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb328-1"><a href="8-1-o-pacote-ggplot2.html#cb328-1" aria-hidden="true" tabindex="-1"></a>imdb <span class="sc">%&gt;%</span> </span>
<span id="cb328-2"><a href="8-1-o-pacote-ggplot2.html#cb328-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(diretor <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Steven Spielberg&quot;</span>, <span class="st">&quot;Quentin Tarantino&quot;</span>, <span class="st">&quot;Woody Allen&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb328-3"><a href="8-1-o-pacote-ggplot2.html#cb328-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb328-4"><a href="8-1-o-pacote-ggplot2.html#cb328-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> diretor, <span class="at">y =</span> receita, <span class="at">fill =</span> diretor), <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb328-5"><a href="8-1-o-pacote-ggplot2.html#cb328-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar) <span class="sc">+</span></span>
<span id="cb328-6"><a href="8-1-o-pacote-ggplot2.html#cb328-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(</span>
<span id="cb328-7"><a href="8-1-o-pacote-ggplot2.html#cb328-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="st">&quot;Woody Allen&quot;</span>, <span class="st">&quot;Quentin Tarantino&quot;</span>, <span class="st">&quot;Steven Spielberg&quot;</span>)</span>
<span id="cb328-8"><a href="8-1-o-pacote-ggplot2.html#cb328-8" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## Warning: Removed 4 rows containing non-finite values (stat_boxplot).</code></pre>
<p><img src="08-graficos_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<p>Também é possível fazer isso usando as funções do pacote <code>forcats</code>, apresentado com detalhes <a href="https://www.curso-r.com/material/forcats/">aqui</a>.</p>
</div>
<div id="escolhendo-cores-manualmente" class="section level4" number="8.1.5.4">
<h4><span class="header-section-number">8.1.5.4</span> Escolhendo cores manualmente</h4>
<p>O pacote<code>ggplot2</code> utiliza uma palheta de cores padrão. Se você quiser especificar as suas próprias cores, faça isso utilizando a função <code>scale_()</code>.</p>
<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb330-1"><a href="8-1-o-pacote-ggplot2.html#cb330-1" aria-hidden="true" tabindex="-1"></a>imdb <span class="sc">%&gt;%</span> </span>
<span id="cb330-2"><a href="8-1-o-pacote-ggplot2.html#cb330-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(diretor <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Steven Spielberg&quot;</span>, <span class="st">&quot;Quentin Tarantino&quot;</span>, <span class="st">&quot;Woody Allen&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb330-3"><a href="8-1-o-pacote-ggplot2.html#cb330-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb330-4"><a href="8-1-o-pacote-ggplot2.html#cb330-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> diretor, <span class="at">y =</span> receita, <span class="at">fill =</span> diretor), <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb330-5"><a href="8-1-o-pacote-ggplot2.html#cb330-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar) <span class="sc">+</span></span>
<span id="cb330-6"><a href="8-1-o-pacote-ggplot2.html#cb330-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(</span>
<span id="cb330-7"><a href="8-1-o-pacote-ggplot2.html#cb330-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="st">&quot;Woody Allen&quot;</span>, <span class="st">&quot;Quentin Tarantino&quot;</span>, <span class="st">&quot;Steven Spielberg&quot;</span>)</span>
<span id="cb330-8"><a href="8-1-o-pacote-ggplot2.html#cb330-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb330-9"><a href="8-1-o-pacote-ggplot2.html#cb330-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;#999999&quot;</span>, <span class="st">&quot;#E69F00&quot;</span>, <span class="st">&quot;#56B4E9&quot;</span>))</span></code></pre></div>
<pre><code>## Warning: Removed 4 rows containing non-finite values (stat_boxplot).</code></pre>
<p><img src="08-graficos_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
</div>
<div id="modificando-o-visual-do-gráfico" class="section level4" number="8.1.5.5">
<h4><span class="header-section-number">8.1.5.5</span> Modificando o visual do gráfico</h4>
<p>Podemos mudar aspectos visuais do gráfico, como fontes, cores e estilos dos textos, grids, marcações, cor do fundo etc, a partir da função <code>theme()</code>. No exemplo abaixo, eliminamos o texto e as marcações do eixo <span class="math inline">\(x\)</span>.</p>
<div class="sourceCode" id="cb332"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb332-1"><a href="8-1-o-pacote-ggplot2.html#cb332-1" aria-hidden="true" tabindex="-1"></a>imdb <span class="sc">%&gt;%</span> </span>
<span id="cb332-2"><a href="8-1-o-pacote-ggplot2.html#cb332-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(diretor <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Steven Spielberg&quot;</span>, <span class="st">&quot;Quentin Tarantino&quot;</span>, <span class="st">&quot;Woody Allen&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb332-3"><a href="8-1-o-pacote-ggplot2.html#cb332-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb332-4"><a href="8-1-o-pacote-ggplot2.html#cb332-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> diretor, <span class="at">y =</span> receita, <span class="at">fill =</span> diretor)) <span class="sc">+</span></span>
<span id="cb332-5"><a href="8-1-o-pacote-ggplot2.html#cb332-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar) <span class="sc">+</span></span>
<span id="cb332-6"><a href="8-1-o-pacote-ggplot2.html#cb332-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(</span>
<span id="cb332-7"><a href="8-1-o-pacote-ggplot2.html#cb332-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="st">&quot;Woody Allen&quot;</span>, <span class="st">&quot;Quentin Tarantino&quot;</span>, <span class="st">&quot;Steven Spielberg&quot;</span>)</span>
<span id="cb332-8"><a href="8-1-o-pacote-ggplot2.html#cb332-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb332-9"><a href="8-1-o-pacote-ggplot2.html#cb332-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;#999999&quot;</span>, <span class="st">&quot;#E69F00&quot;</span>, <span class="st">&quot;#56B4E9&quot;</span>)) <span class="sc">+</span></span>
<span id="cb332-10"><a href="8-1-o-pacote-ggplot2.html#cb332-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_blank</span>(), <span class="at">axis.ticks.x =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<pre><code>## Warning: Removed 4 rows containing non-finite values (stat_boxplot).</code></pre>
<p><img src="08-graficos_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
</div>
<div id="modificando-a-posição-da-legenda" class="section level4" number="8.1.5.6">
<h4><span class="header-section-number">8.1.5.6</span> Modificando a posição da legenda</h4>
<p>É possível controlar a posição da legenda facilmente escolhendo uma das posições: <code>left</code>, <code>right</code>, <code>top</code> e <code>bottom</code>.</p>
<div class="sourceCode" id="cb334"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb334-1"><a href="8-1-o-pacote-ggplot2.html#cb334-1" aria-hidden="true" tabindex="-1"></a>imdb <span class="sc">%&gt;%</span> </span>
<span id="cb334-2"><a href="8-1-o-pacote-ggplot2.html#cb334-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(diretor <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Steven Spielberg&quot;</span>, <span class="st">&quot;Quentin Tarantino&quot;</span>, <span class="st">&quot;Woody Allen&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb334-3"><a href="8-1-o-pacote-ggplot2.html#cb334-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb334-4"><a href="8-1-o-pacote-ggplot2.html#cb334-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> diretor, <span class="at">y =</span> receita, <span class="at">fill =</span> diretor)) <span class="sc">+</span></span>
<span id="cb334-5"><a href="8-1-o-pacote-ggplot2.html#cb334-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar) <span class="sc">+</span></span>
<span id="cb334-6"><a href="8-1-o-pacote-ggplot2.html#cb334-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(</span>
<span id="cb334-7"><a href="8-1-o-pacote-ggplot2.html#cb334-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="st">&quot;Woody Allen&quot;</span>, <span class="st">&quot;Quentin Tarantino&quot;</span>, <span class="st">&quot;Steven Spielberg&quot;</span>)</span>
<span id="cb334-8"><a href="8-1-o-pacote-ggplot2.html#cb334-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb334-9"><a href="8-1-o-pacote-ggplot2.html#cb334-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;#999999&quot;</span>, <span class="st">&quot;#E69F00&quot;</span>, <span class="st">&quot;#56B4E9&quot;</span>)) <span class="sc">+</span></span>
<span id="cb334-10"><a href="8-1-o-pacote-ggplot2.html#cb334-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb334-11"><a href="8-1-o-pacote-ggplot2.html#cb334-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_blank</span>(), </span>
<span id="cb334-12"><a href="8-1-o-pacote-ggplot2.html#cb334-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb334-13"><a href="8-1-o-pacote-ggplot2.html#cb334-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span></span>
<span id="cb334-14"><a href="8-1-o-pacote-ggplot2.html#cb334-14" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## Warning: Removed 4 rows containing non-finite values (stat_boxplot).</code></pre>
<p><img src="08-graficos_files/figure-html/unnamed-chunk-27-1.png" width="672" /></p>
<p>Existem alguns temas já prontos disponíveis no <code>ggplot2</code>. Veja alguns exemplos.</p>
<div class="sourceCode" id="cb336"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb336-1"><a href="8-1-o-pacote-ggplot2.html#cb336-1" aria-hidden="true" tabindex="-1"></a>imdb <span class="sc">%&gt;%</span> </span>
<span id="cb336-2"><a href="8-1-o-pacote-ggplot2.html#cb336-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(diretor <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Steven Spielberg&quot;</span>, <span class="st">&quot;Quentin Tarantino&quot;</span>, <span class="st">&quot;Woody Allen&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb336-3"><a href="8-1-o-pacote-ggplot2.html#cb336-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb336-4"><a href="8-1-o-pacote-ggplot2.html#cb336-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> diretor, <span class="at">y =</span> receita, <span class="at">fill =</span> diretor), <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb336-5"><a href="8-1-o-pacote-ggplot2.html#cb336-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar) <span class="sc">+</span></span>
<span id="cb336-6"><a href="8-1-o-pacote-ggplot2.html#cb336-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(</span>
<span id="cb336-7"><a href="8-1-o-pacote-ggplot2.html#cb336-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="st">&quot;Woody Allen&quot;</span>, <span class="st">&quot;Quentin Tarantino&quot;</span>, <span class="st">&quot;Steven Spielberg&quot;</span>)</span>
<span id="cb336-8"><a href="8-1-o-pacote-ggplot2.html#cb336-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb336-9"><a href="8-1-o-pacote-ggplot2.html#cb336-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;#999999&quot;</span>, <span class="st">&quot;#E69F00&quot;</span>, <span class="st">&quot;#56B4E9&quot;</span>)) <span class="sc">+</span></span>
<span id="cb336-10"><a href="8-1-o-pacote-ggplot2.html#cb336-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 4 rows containing non-finite values (stat_boxplot).</code></pre>
<p><img src="08-graficos_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
<div class="sourceCode" id="cb338"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb338-1"><a href="8-1-o-pacote-ggplot2.html#cb338-1" aria-hidden="true" tabindex="-1"></a>imdb <span class="sc">%&gt;%</span> </span>
<span id="cb338-2"><a href="8-1-o-pacote-ggplot2.html#cb338-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(diretor <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Steven Spielberg&quot;</span>, <span class="st">&quot;Quentin Tarantino&quot;</span>, <span class="st">&quot;Woody Allen&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb338-3"><a href="8-1-o-pacote-ggplot2.html#cb338-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb338-4"><a href="8-1-o-pacote-ggplot2.html#cb338-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> diretor, <span class="at">y =</span> receita, <span class="at">fill =</span> diretor), <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb338-5"><a href="8-1-o-pacote-ggplot2.html#cb338-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar) <span class="sc">+</span></span>
<span id="cb338-6"><a href="8-1-o-pacote-ggplot2.html#cb338-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(</span>
<span id="cb338-7"><a href="8-1-o-pacote-ggplot2.html#cb338-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="st">&quot;Woody Allen&quot;</span>, <span class="st">&quot;Quentin Tarantino&quot;</span>, <span class="st">&quot;Steven Spielberg&quot;</span>)</span>
<span id="cb338-8"><a href="8-1-o-pacote-ggplot2.html#cb338-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb338-9"><a href="8-1-o-pacote-ggplot2.html#cb338-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;#999999&quot;</span>, <span class="st">&quot;#E69F00&quot;</span>, <span class="st">&quot;#56B4E9&quot;</span>)) <span class="sc">+</span></span>
<span id="cb338-10"><a href="8-1-o-pacote-ggplot2.html#cb338-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 4 rows containing non-finite values (stat_boxplot).</code></pre>
<p><img src="08-graficos_files/figure-html/unnamed-chunk-28-2.png" width="672" /></p>
<div class="sourceCode" id="cb340"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb340-1"><a href="8-1-o-pacote-ggplot2.html#cb340-1" aria-hidden="true" tabindex="-1"></a>imdb <span class="sc">%&gt;%</span> </span>
<span id="cb340-2"><a href="8-1-o-pacote-ggplot2.html#cb340-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(diretor <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Steven Spielberg&quot;</span>, <span class="st">&quot;Quentin Tarantino&quot;</span>, <span class="st">&quot;Woody Allen&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb340-3"><a href="8-1-o-pacote-ggplot2.html#cb340-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb340-4"><a href="8-1-o-pacote-ggplot2.html#cb340-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> diretor, <span class="at">y =</span> receita, <span class="at">fill =</span> diretor), <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb340-5"><a href="8-1-o-pacote-ggplot2.html#cb340-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar) <span class="sc">+</span></span>
<span id="cb340-6"><a href="8-1-o-pacote-ggplot2.html#cb340-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(</span>
<span id="cb340-7"><a href="8-1-o-pacote-ggplot2.html#cb340-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="st">&quot;Woody Allen&quot;</span>, <span class="st">&quot;Quentin Tarantino&quot;</span>, <span class="st">&quot;Steven Spielberg&quot;</span>)</span>
<span id="cb340-8"><a href="8-1-o-pacote-ggplot2.html#cb340-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb340-9"><a href="8-1-o-pacote-ggplot2.html#cb340-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;#999999&quot;</span>, <span class="st">&quot;#E69F00&quot;</span>, <span class="st">&quot;#56B4E9&quot;</span>)) <span class="sc">+</span></span>
<span id="cb340-10"><a href="8-1-o-pacote-ggplot2.html#cb340-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_dark</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 4 rows containing non-finite values (stat_boxplot).</code></pre>
<p><img src="08-graficos_files/figure-html/unnamed-chunk-28-3.png" width="672" /></p>
</div>
<div id="acrescentando-título" class="section level4" number="8.1.5.7">
<h4><span class="header-section-number">8.1.5.7</span> Acrescentando título</h4>
<p>Para acrescentar um título ao seu gráfico, utilize a função <code>ggtitle()</code>.</p>
<div class="sourceCode" id="cb342"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb342-1"><a href="8-1-o-pacote-ggplot2.html#cb342-1" aria-hidden="true" tabindex="-1"></a>imdb <span class="sc">%&gt;%</span> </span>
<span id="cb342-2"><a href="8-1-o-pacote-ggplot2.html#cb342-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(diretor <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Steven Spielberg&quot;</span>, <span class="st">&quot;Quentin Tarantino&quot;</span>, <span class="st">&quot;Woody Allen&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb342-3"><a href="8-1-o-pacote-ggplot2.html#cb342-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb342-4"><a href="8-1-o-pacote-ggplot2.html#cb342-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> diretor, <span class="at">y =</span> receita, <span class="at">fill =</span> diretor), <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb342-5"><a href="8-1-o-pacote-ggplot2.html#cb342-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar) <span class="sc">+</span></span>
<span id="cb342-6"><a href="8-1-o-pacote-ggplot2.html#cb342-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(</span>
<span id="cb342-7"><a href="8-1-o-pacote-ggplot2.html#cb342-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="st">&quot;Woody Allen&quot;</span>, <span class="st">&quot;Quentin Tarantino&quot;</span>, <span class="st">&quot;Steven Spielberg&quot;</span>)</span>
<span id="cb342-8"><a href="8-1-o-pacote-ggplot2.html#cb342-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb342-9"><a href="8-1-o-pacote-ggplot2.html#cb342-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;#999999&quot;</span>, <span class="st">&quot;#E69F00&quot;</span>, <span class="st">&quot;#56B4E9&quot;</span>)) <span class="sc">+</span></span>
<span id="cb342-10"><a href="8-1-o-pacote-ggplot2.html#cb342-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb342-11"><a href="8-1-o-pacote-ggplot2.html#cb342-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Meu boxplot bonitão&quot;</span>)</span></code></pre></div>
<pre><code>## Warning: Removed 4 rows containing non-finite values (stat_boxplot).</code></pre>
<p><img src="08-graficos_files/figure-html/unnamed-chunk-29-1.png" width="672" /></p>
</div>
</div>
<div id="onde-continuar-estudando" class="section level3" number="8.1.6">
<h3><span class="header-section-number">8.1.6</span> Onde continuar estudando?</h3>
<p>O pacote <code>ggplot2</code> tem incontáveis funcionalidades, principalmente na hora de personalizar o seu gráfico. Abordamos aqui apenas algumas poucas delas. Para continuar aprendendo, sugerimos as seguintes referências:</p>
<ul>
<li><p>O <a href="https://r4ds.had.co.nz/data-visualisation.html">capítulo de visualizações do R4DS</a> é um ótimo material para fixar os conceitos básicos.</p></li>
<li><p>O <a href="http://www.cookbook-r.com/Graphs/">capítulo de gráficos do livro R Cookbook</a> é um bom material de consulta para relembrar velhos truques e descobrir novas formas de personalizar seu gráfico.</p></li>
<li><p>O site <a href="https://exts.ggplot2.tidyverse.org/">ggplot2 extensions</a> tem uma galeria com diversos pacotes que deixam o ggplot2 bem mais poderoso, indo de novos geoms até animações.</p></li>
</ul>
<div class="sourceCode" id="cb344"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb344-1"><a href="8-1-o-pacote-ggplot2.html#cb344-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggridges)</span>
<span id="cb344-2"><a href="8-1-o-pacote-ggplot2.html#cb344-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb344-3"><a href="8-1-o-pacote-ggplot2.html#cb344-3" aria-hidden="true" tabindex="-1"></a>imdb <span class="sc">%&gt;%</span></span>
<span id="cb344-4"><a href="8-1-o-pacote-ggplot2.html#cb344-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ano <span class="sc">&gt;</span> <span class="dv">2005</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb344-5"><a href="8-1-o-pacote-ggplot2.html#cb344-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ano =</span> <span class="fu">as.factor</span>(ano)) <span class="sc">%&gt;%</span> </span>
<span id="cb344-6"><a href="8-1-o-pacote-ggplot2.html#cb344-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> ano, <span class="at">x =</span> receita, <span class="at">fill =</span> ano)) <span class="sc">+</span></span>
<span id="cb344-7"><a href="8-1-o-pacote-ggplot2.html#cb344-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density_ridges</span>(<span class="at">na.rm =</span> <span class="cn">TRUE</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## Picking joint bandwidth of 17300000</code></pre>
<p><img src="08-graficos_files/figure-html/unnamed-chunk-30-1.png" width="672" /></p>
</div>
<div id="exercícios-11" class="section level3" number="8.1.7">
<h3><span class="header-section-number">8.1.7</span> Exercícios</h3>
<p><strong>1.</strong> O que tem de errado no código abaixo? Por que os pontos não ficaram azuis?</p>
<div class="sourceCode" id="cb346"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb346-1"><a href="8-1-o-pacote-ggplot2.html#cb346-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg) <span class="sc">+</span> </span>
<span id="cb346-2"><a href="8-1-o-pacote-ggplot2.html#cb346-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>))</span></code></pre></div>
<p><img src="08-graficos_files/figure-html/unnamed-chunk-31-1.png" width="672" /></p>
<p><strong>2.</strong> Mapeie uma variável contínua para uma cor, tamanho e forma. Como essas formas
estéticas se comportam diferente para variáveis categóricas vs contínuas?</p>
<p><strong>3.</strong> O que acontece se você rodar <code>ggplot(data = mtcars)</code>?</p>
<p><strong>4.</strong> Utilizando o <code>mtcars</code>, faça um gráfico de dispersão de <code>mpg</code> por <code>qsec</code>.</p>
<p><strong>5.</strong> Utilizando o <code>mtcars</code>, o que acontece se você fizer um gráfico de dispersão de <code>vs</code> por <code>mpg</code>? Por que o gráfico não é útil?</p>
</div>
</div>
<hr/>
<footer>
<a href="https://curso-r.com" target="_blank"><img src="https://raw.githubusercontent.com/curso-r/site-v2/master/static/img/logo_cursor_full.png" width="15%", alt="Curso-R"/></a>
</footer>
            </section>

          </div>
        </div>
      </div>
<a href="8-graficos.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="8-2-o-pacote-plotly.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "serif",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["livro-curso-r.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
