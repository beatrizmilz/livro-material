<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 3 R Básico | Ciência de dados em R</title>
  <meta name="description" content="Livro com os tutoriais e material dos cursos da Curso-R." />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 3 R Básico | Ciência de dados em R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Livro com os tutoriais e material dos cursos da Curso-R." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 3 R Básico | Ciência de dados em R" />
  
  <meta name="twitter:description" content="Livro com os tutoriais e material dos cursos da Curso-R." />
  

<meta name="author" content="Curso-R" />


<meta name="date" content="2020-04-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="rstudio.html"/>
<link rel="next" href="pipe.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"><img src = "img/logo.png" width = 40%></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Sobre</a></li>
<li class="chapter" data-level="1" data-path="instalação.html"><a href="instalação.html"><i class="fa fa-check"></i><b>1</b> Instalação</a><ul>
<li class="chapter" data-level="1.1" data-path="instalação.html"><a href="instalação.html#instalação-do-r"><i class="fa fa-check"></i><b>1.1</b> Instalação do R</a><ul>
<li class="chapter" data-level="1.1.1" data-path="instalação.html"><a href="instalação.html#no-windows"><i class="fa fa-check"></i><b>1.1.1</b> No Windows</a></li>
<li class="chapter" data-level="1.1.2" data-path="instalação.html"><a href="instalação.html#no-linux"><i class="fa fa-check"></i><b>1.1.2</b> No Linux</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="instalação.html"><a href="instalação.html#instalação-do-rstudio"><i class="fa fa-check"></i><b>1.2</b> Instalação do RStudio</a><ul>
<li class="chapter" data-level="1.2.1" data-path="instalação.html"><a href="instalação.html#no-windows-1"><i class="fa fa-check"></i><b>1.2.1</b> No Windows</a></li>
<li class="chapter" data-level="1.2.2" data-path="instalação.html"><a href="instalação.html#no-linux-1"><i class="fa fa-check"></i><b>1.2.2</b> No Linux</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="instalação.html"><a href="instalação.html#instalação-de-pacotes"><i class="fa fa-check"></i><b>1.3</b> Instalação de pacotes</a><ul>
<li class="chapter" data-level="1.3.1" data-path="instalação.html"><a href="instalação.html#via-cran"><i class="fa fa-check"></i><b>1.3.1</b> Via CRAN</a></li>
<li class="chapter" data-level="1.3.2" data-path="instalação.html"><a href="instalação.html#via-github"><i class="fa fa-check"></i><b>1.3.2</b> Via Github</a></li>
<li class="chapter" data-level="1.3.3" data-path="instalação.html"><a href="instalação.html#via-arquivo-.zip-ou-.tar.gz"><i class="fa fa-check"></i><b>1.3.3</b> Via arquivo .zip ou .tar.gz</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="rstudio.html"><a href="rstudio.html"><i class="fa fa-check"></i><b>2</b> RStudio</a><ul>
<li class="chapter" data-level="2.1" data-path="rstudio.html"><a href="rstudio.html#telas"><i class="fa fa-check"></i><b>2.1</b> Telas</a></li>
<li class="chapter" data-level="2.2" data-path="rstudio.html"><a href="rstudio.html#atalhos"><i class="fa fa-check"></i><b>2.2</b> Atalhos</a></li>
<li class="chapter" data-level="2.3" data-path="rstudio.html"><a href="rstudio.html#projetos"><i class="fa fa-check"></i><b>2.3</b> Projetos</a></li>
<li class="chapter" data-level="2.4" data-path="rstudio.html"><a href="rstudio.html#cheatsheets"><i class="fa fa-check"></i><b>2.4</b> Cheatsheets</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="r-básico.html"><a href="r-básico.html"><i class="fa fa-check"></i><b>3</b> R Básico</a><ul>
<li class="chapter" data-level="3.1" data-path="r-básico.html"><a href="r-básico.html#pedindo-ajuda"><i class="fa fa-check"></i><b>3.1</b> Pedindo Ajuda</a><ul>
<li class="chapter" data-level="3.1.1" data-path="r-básico.html"><a href="r-básico.html#documentação-do-r"><i class="fa fa-check"></i><b>3.1.1</b> Documentação do R</a></li>
<li class="chapter" data-level="3.1.2" data-path="r-básico.html"><a href="r-básico.html#google"><i class="fa fa-check"></i><b>3.1.2</b> Google</a></li>
<li class="chapter" data-level="3.1.3" data-path="r-básico.html"><a href="r-básico.html#stack-overflow"><i class="fa fa-check"></i><b>3.1.3</b> Stack Overflow</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="r-básico.html"><a href="r-básico.html#r-como-calculadora"><i class="fa fa-check"></i><b>3.2</b> R como calculadora</a></li>
<li class="chapter" data-level="3.3" data-path="r-básico.html"><a href="r-básico.html#objetos-e-classes"><i class="fa fa-check"></i><b>3.3</b> Objetos e Classes</a><ul>
<li class="chapter" data-level="3.3.1" data-path="r-básico.html"><a href="r-básico.html#data-frames-parte-1"><i class="fa fa-check"></i><b>3.3.1</b> Data frames (parte 1)</a></li>
<li class="chapter" data-level="3.3.2" data-path="r-básico.html"><a href="r-básico.html#objetos-atômicos"><i class="fa fa-check"></i><b>3.3.2</b> Objetos atômicos</a></li>
<li class="chapter" data-level="3.3.3" data-path="r-básico.html"><a href="r-básico.html#vetores"><i class="fa fa-check"></i><b>3.3.3</b> Vetores</a></li>
<li class="chapter" data-level="3.3.4" data-path="r-básico.html"><a href="r-básico.html#classes"><i class="fa fa-check"></i><b>3.3.4</b> Classes</a></li>
<li class="chapter" data-level="3.3.5" data-path="r-básico.html"><a href="r-básico.html#coerção"><i class="fa fa-check"></i><b>3.3.5</b> Coerção</a></li>
<li class="chapter" data-level="3.3.6" data-path="r-básico.html"><a href="r-básico.html#matrizes"><i class="fa fa-check"></i><b>3.3.6</b> Matrizes</a></li>
<li class="chapter" data-level="3.3.7" data-path="r-básico.html"><a href="r-básico.html#fatores"><i class="fa fa-check"></i><b>3.3.7</b> Fatores</a></li>
<li class="chapter" data-level="3.3.8" data-path="r-básico.html"><a href="r-básico.html#listas"><i class="fa fa-check"></i><b>3.3.8</b> Listas</a></li>
<li class="chapter" data-level="3.3.9" data-path="r-básico.html"><a href="r-básico.html#data-frames-parte-2"><i class="fa fa-check"></i><b>3.3.9</b> Data frames (parte 2)</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="r-básico.html"><a href="r-básico.html#valores-especiais"><i class="fa fa-check"></i><b>3.4</b> Valores especiais</a></li>
<li class="chapter" data-level="3.5" data-path="r-básico.html"><a href="r-básico.html#controles-de-fluxo"><i class="fa fa-check"></i><b>3.5</b> Controles de Fluxo</a><ul>
<li class="chapter" data-level="3.5.1" data-path="r-básico.html"><a href="r-básico.html#if-e-else"><i class="fa fa-check"></i><b>3.5.1</b> IF e ELSE</a></li>
<li class="chapter" data-level="3.5.2" data-path="r-básico.html"><a href="r-básico.html#for"><i class="fa fa-check"></i><b>3.5.2</b> for</a></li>
<li class="chapter" data-level="3.5.3" data-path="r-básico.html"><a href="r-básico.html#while"><i class="fa fa-check"></i><b>3.5.3</b> while</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="r-básico.html"><a href="r-básico.html#fórmulas"><i class="fa fa-check"></i><b>3.6</b> Fórmulas</a></li>
<li class="chapter" data-level="3.7" data-path="r-básico.html"><a href="r-básico.html#gráficos-base"><i class="fa fa-check"></i><b>3.7</b> Gráficos (base)</a><ul>
<li class="chapter" data-level="3.7.1" data-path="r-básico.html"><a href="r-básico.html#gráfico-de-dispersão"><i class="fa fa-check"></i><b>3.7.1</b> Gráfico de dispersão</a></li>
<li class="chapter" data-level="3.7.2" data-path="r-básico.html"><a href="r-básico.html#histograma"><i class="fa fa-check"></i><b>3.7.2</b> Histograma</a></li>
<li class="chapter" data-level="3.7.3" data-path="r-básico.html"><a href="r-básico.html#boxplot"><i class="fa fa-check"></i><b>3.7.3</b> Boxplot</a></li>
<li class="chapter" data-level="3.7.4" data-path="r-básico.html"><a href="r-básico.html#gráfico-de-barras"><i class="fa fa-check"></i><b>3.7.4</b> Gráfico de barras</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="r-básico.html"><a href="r-básico.html#exercícios"><i class="fa fa-check"></i><b>3.8</b> Exercícios</a></li>
<li class="chapter" data-level="3.9" data-path="r-básico.html"><a href="r-básico.html#respostas"><i class="fa fa-check"></i><b>3.9</b> Respostas</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="pipe.html"><a href="pipe.html"><i class="fa fa-check"></i><b>4</b> Pipe</a><ul>
<li class="chapter" data-level="4.1" data-path="pipe.html"><a href="pipe.html#o-operador-pipe"><i class="fa fa-check"></i><b>4.1</b> O operador pipe</a></li>
<li class="chapter" data-level="4.2" data-path="pipe.html"><a href="pipe.html#outros-operadores"><i class="fa fa-check"></i><b>4.2</b> Outros operadores</a><ul>
<li class="chapter" data-level="4.2.1" data-path="pipe.html"><a href="pipe.html#operador-de-atribuição-assignment-operator"><i class="fa fa-check"></i><b>4.2.1</b> Operador de atribuição ( Assignment operator )</a></li>
<li class="chapter" data-level="4.2.2" data-path="pipe.html"><a href="pipe.html#operador-tee"><i class="fa fa-check"></i><b>4.2.2</b> Operador tee</a></li>
<li class="chapter" data-level="4.2.3" data-path="pipe.html"><a href="pipe.html#exposition-operator"><i class="fa fa-check"></i><b>4.2.3</b> Exposition operator</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="pipe.html"><a href="pipe.html#exercícios-1"><i class="fa fa-check"></i><b>4.3</b> Exercícios</a></li>
<li class="chapter" data-level="4.4" data-path="pipe.html"><a href="pipe.html#respostas-1"><i class="fa fa-check"></i><b>4.4</b> Respostas</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="importação.html"><a href="importação.html"><i class="fa fa-check"></i><b>5</b> Importação</a><ul>
<li class="chapter" data-level="5.1" data-path="importação.html"><a href="importação.html#readr"><i class="fa fa-check"></i><b>5.1</b> readr</a></li>
<li class="chapter" data-level="5.2" data-path="importação.html"><a href="importação.html#readxl"><i class="fa fa-check"></i><b>5.2</b> readxl</a></li>
<li class="chapter" data-level="5.3" data-path="importação.html"><a href="importação.html#haven"><i class="fa fa-check"></i><b>5.3</b> haven</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="manipulação.html"><a href="manipulação.html"><i class="fa fa-check"></i><b>6</b> Manipulação</a><ul>
<li class="chapter" data-level="6.1" data-path="manipulação.html"><a href="manipulação.html#trabalhando-com-tibbles"><i class="fa fa-check"></i><b>6.1</b> Trabalhando com tibbles</a></li>
<li class="chapter" data-level="6.2" data-path="manipulação.html"><a href="manipulação.html#o-pacote-dplyr"><i class="fa fa-check"></i><b>6.2</b> O pacote dplyr</a><ul>
<li class="chapter" data-level="6.2.1" data-path="manipulação.html"><a href="manipulação.html#filtrando-linhas"><i class="fa fa-check"></i><b>6.2.1</b> Filtrando linhas</a></li>
<li class="chapter" data-level="6.2.2" data-path="manipulação.html"><a href="manipulação.html#selecionando-colunas"><i class="fa fa-check"></i><b>6.2.2</b> Selecionando colunas</a></li>
<li class="chapter" data-level="6.2.3" data-path="manipulação.html"><a href="manipulação.html#ordenando-a-base"><i class="fa fa-check"></i><b>6.2.3</b> Ordenando a base</a></li>
<li class="chapter" data-level="6.2.4" data-path="manipulação.html"><a href="manipulação.html#criando-e-modificando-colunas"><i class="fa fa-check"></i><b>6.2.4</b> Criando e modificando colunas</a></li>
<li class="chapter" data-level="6.2.5" data-path="manipulação.html"><a href="manipulação.html#summarisando-a-base"><i class="fa fa-check"></i><b>6.2.5</b> Summarisando a base</a></li>
<li class="chapter" data-level="6.2.6" data-path="manipulação.html"><a href="manipulação.html#juntando-duas-bases"><i class="fa fa-check"></i><b>6.2.6</b> Juntando duas bases</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="manipulação.html"><a href="manipulação.html#tidyr"><i class="fa fa-check"></i><b>6.3</b> tidyr</a><ul>
<li class="chapter" data-level="6.3.1" data-path="manipulação.html"><a href="manipulação.html#gather"><i class="fa fa-check"></i><b>6.3.1</b> <code>gather()</code></a></li>
<li class="chapter" data-level="6.3.2" data-path="manipulação.html"><a href="manipulação.html#spread"><i class="fa fa-check"></i><b>6.3.2</b> <code>spread()</code></a></li>
<li class="chapter" data-level="6.3.3" data-path="manipulação.html"><a href="manipulação.html#outras-funções-do-tidyr"><i class="fa fa-check"></i><b>6.3.3</b> Outras funções do <code>tidyr</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Ciência de dados em R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r-básico" class="section level1">
<h1><span class="header-section-number">Capítulo 3</span> R Básico</h1>
<p>Introduziremos aqui os principais conceitos de progamação em R. Indicamos a leitura deste capítulo a quem nunca teve contato com uma linguagem de programação ou a quem gostaria de entender um pouco melhor a estrutura de objetos, funções e classes do R.</p>
<div id="pedindo-ajuda" class="section level2">
<h2><span class="header-section-number">3.1</span> Pedindo Ajuda</h2>
<p>A linguagem <code>R</code> é bem intuitiva. É possível fazer bastante coisa à base da tentativa e erro. Além disso, grande parte do conhecimento é escalável, isto é, aprender a utilizar uma função é meio caminho andado para aprender todas as outras funções que operam de forma semelhante<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>.</p>
<p>No entanto, a intuição não infalível, e recorrentemente vamos precisar de ajuda para rodar alguma função ou descobrir como fazer alguma tarefa no R. Felizmente, a comunidade R é bem ativa e existem vários lugares para buscar respostas. Nesta seção, vamos apresentar as principais maneiras algumas dessas maneiras.</p>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-2"></span>
<img src="img/r-base/code_hero_rstats.png" alt="Arte por Allison Horst. Veja nas Referências onde encontrá-la." width="1378" />
<p class="caption">
Figure 3.1: Arte por Allison Horst. Veja nas Referências onde encontrá-la.
</p>
</div>
<p>No R, há quatro principais entidades para se pedir ajuda:</p>
<ul>
<li>Help/documentação do R</li>
<li>Google</li>
<li>Stack Overflow</li>
<li>Coleguinha</li>
</ul>
<p>A busca por ajuda é feita preferencialmente, mas não necessariamente, na ordem acima.</p>
<div id="documentação-do-r" class="section level3">
<h3><span class="header-section-number">3.1.1</span> Documentação do R</h3>
<p>A documentação do R serve para você aprender a usar uma determinada função.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1">?mean</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">help</span>(mean)</a></code></pre></div>
<p>Cinco dicas:</p>
<ol style="list-style-type: decimal">
<li>Os exemplos no final são particularmente úteis.</li>
<li>Leia a seção <strong>Usage</strong> para ter noção de como usar a função.</li>
<li>Os parâmetros da função estão descritos em <strong>Arguments</strong>.</li>
<li>Caso essa função não atenda às suas necessidades, a seção <strong>See Also</strong> sugere funções relacionadas.</li>
<li>Alguns pacotes possuem tutorias de uso mais completos. Esses textos são chamados de <code>vignettes</code> e podem ser acessados com a função <code>vignette(package = 'nomeDoPacote')</code>. Por exemplo, <code>vignette(package = 'dplyr')</code>.</li>
<li>Bases de dados presentes em pacotes também têm documentação, e geralmente é possível encontrar o significado de cada variável nela. Por exemplo, <code>help(mtcars)</code>.</li>
</ol>
</div>
<div id="google" class="section level3">
<h3><span class="header-section-number">3.1.2</span> Google</h3>
<p>Há uma comunidade gigantesca de usuários de R gerando diariamente uma infinidade de conteúdos e discussões. Não raramente, você irá encontrar discussões sobre o seu problema simplesmente jogando o seu erro no Google. Essa deve ser sua primeira tentativa para reseolver um problema! Pesquisas em inglês aumentam consideravelmente a chance de encontrar uma resposta.</p>
<p>Exemplo (repare no ‘r’ adicionado na busca, isso ajuda bastante):</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">log</span>(<span class="st">&quot;5&quot;</span>)</a>
<a class="sourceLine" id="cb2-2" title="2"><span class="co">## Error in log(&quot;5&quot;): non-numeric argument to mathematical function</span></a></code></pre></div>
<p><img src="img/r-base/ajuda_google.png" width="398" style="display: block; margin: auto;" /></p>
</div>
<div id="stack-overflow" class="section level3">
<h3><span class="header-section-number">3.1.3</span> Stack Overflow</h3>
<p>O <a href="http://stackoverflow.com/">Stack Overflow</a> e o <a href="http://pt.stackoverflow.com/">Stack Overflow em Português</a> são sites de Pergunta e Resposta amplamente utilizados por todas as linguagens de programação, e o R é uma delas. Nos EUA, chegam até a usar a reputação dos usuários como diferencial no currículo!</p>
<p>Provavelmente o Google lhe indicará uma página deles quando você estiver procurando ajuda. E quando todas as fontes possíveis de ajuda falharem, o Stack Overflow lhe dará o espaço para <strong>criar sua própria pergunta</strong>.</p>
<p><strong>Um ponto importante</strong>: como fazer uma <em>boa pergunta</em> no Stack Overflow?</p>
<p>No site, existe um tutorial com uma lista de boas práticas, <a href="http://pt.stackoverflow.com/help/how-to-ask">que se encontra aqui</a>. Resumindo, as principais dicas são</p>
<ul>
<li>ser conciso;</li>
<li>ser específico;</li>
<li>ter mente aberta; e</li>
<li>ser gentil.</li>
</ul>
<p>Porém, no caso do R, há outro requisito que vai aumentar muito sua chance de ter uma boa resposta: <strong>exemplinho minimal e reprodutível</strong>.</p>
<ul>
<li><p>Ser <strong>minimal</strong>: usar bancos de dados menores e utilizar pedaços de códigos apenas suficientes para apresentar o seu problema. Não precisa de banco de dados de um milhão de linhas e nem colocar o seu código inteiro para descrever a sua dúvida.</p></li>
<li><p>Ser <strong>reprodutível</strong>: o seu código deve rodar fora da sua máquina. Se você não fornecer uma versão do seu problema que rode (ou que imite seu erro), as pessoas vão logo desistir de te ajudar. Por isso, nunca coloque bancos de dados que só você tem acesso. Use bancos de dados que já vem no R ou disponibilize um exemplo (possivelmente anonimizado) em <code>.csv</code> na web para baixar. E se precisar utilizar funções diferentes, coloque as <code>library</code>’s correspondentes.</p></li>
</ul>
<!-- ### R Markdown -->
<!-- O R Markdown é um tipo de documento especial que contém tanto textos em *markdown* quanto *chunks* de códigos em R, tudo escrito no mesmo lugar.  -->
<!-- O *markdown* nada mais é do que um documento de texto com alguns padrões básicos de formatação, como negrito, itálico, títulos, subtítulos, itens e referências cruzadas. Já os *chunks* são pedaços de códigos em R encapsulados por três crases (```). Os códigos são executados sempre que o documento é processado. -->
<!-- ```{r, echo=FALSE} -->
<!-- cat("```{r} -->
<!-- isto é um chunk.  -->
<!-- ```") -->
<!-- ``` -->
<!-- > Este site foi escrito em R Markdown. Toda vez que aparecer exemplos de código de R, havia um chunk no .Rmd original. -->
<!-- Para produção de relatórios, o R Markdown possui algumas vantagens, como: -->
<!-- 1. **Simplicidade e foco**. Permite ao usuário o foco na análise e não na formatação do documento. -->
<!-- 1. **Versátil**. Pode ser utilizado para gerar documentos em `LaTeX`, `Word`, `HTML` e apresentações em `beamer`, `pptx` e `HTML`. Pode ainda gerar sites, livros, dissertações de mestrado e até mesmo dashboards interativos. -->
<!-- 1. **Reprodutível**. O R Markdown nada mais é que um arquivo de texto. Além disso, ele tenta te obrigar a fazer o documento mais autocontido possível. Assim, um documento `.Rmd` é fácil de compartilhar e de ser utilizado pelo receptor. Lembre-se, o receptor pode ser o futuro você! Vale enfatizar que a reprodutibilidade é considerada como um dos princípios fundamentais da ciência. Então, só de usar R Markdown, você já está colaborando com o método científico. :) -->
<!-- 1. **Flexível**. É possível configurar e criar *templates* de análises para quaisquer tipos de aplicações e clientes. Os textos podem ser parametrizados por números que variam de versão para versão, mensalmente, por exemplo, tudo escrito somente em R.  -->
<!-- Criar um R Markdown novo no RStudio é fácil. Clique no botão de criar arquivo e selecione R Markdown. -->
<!-- ```{r echo=FALSE, fig.align='center'} -->
<!-- knitr::include_graphics(rep("img/r-base/criar_rmarkdown.png")) -->
<!-- ``` -->
<!-- Para detalhes sobre como utilizar o R Markdown, leia   [esta seção do R4DS](http://r4ds.had.co.nz/r-markdown.html) e [o tutorial do RStudio](http://rmarkdown.rstudio.com/lesson-1.html). -->
</div>
</div>
<div id="r-como-calculadora" class="section level2">
<h2><span class="header-section-number">3.2</span> R como calculadora</h2>
<p>Pelo console, é possível executar qualquer comando do R.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="dv">1</span><span class="op">:</span><span class="dv">30</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="co">##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="co">## [26] 26 27 28 29 30</span></a></code></pre></div>
<p>Esse comando é uma forma simplificada de criar um vetor de inteiros de 1 a 30.
Os números que aparecem entre colchetes ([1] e [24]) indicam o índice (ordem) do primeiro elemento impresso em cada linha.</p>
<blockquote>
<p>Quando compilamos? Quem vem de linguagens como o C ou Java espera que seja necessário compilar o código em texto para o código das máquinas (geralmente um código binário). No R, isso não é necessário. O R é uma linguagem de programação dinâmica que interpreta o seu código enquanto você o executa.</p>
</blockquote>
<p>Tente jogar no console: <code>2 * 2 - (4 + 4) / 2</code>.</p>
<p>Pronto! Com essa simples expressão você já é capaz de pedir ao R para fazer qualquer uma das quatro operações aritméticas básicas. A seguir, apresentamos uma lista resumindo como fazer as principais operações no R.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="co"># adição</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="co">## [1] 2</span></a>
<a class="sourceLine" id="cb4-4" title="4"></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="co"># subtração</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="dv">4</span> <span class="op">-</span><span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="co">## [1] 2</span></a>
<a class="sourceLine" id="cb4-8" title="8"></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="co"># multiplicação</span></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="dv">2</span> <span class="op">*</span><span class="st"> </span><span class="dv">3</span></a>
<a class="sourceLine" id="cb4-11" title="11"><span class="co">## [1] 6</span></a>
<a class="sourceLine" id="cb4-12" title="12"></a>
<a class="sourceLine" id="cb4-13" title="13"><span class="co"># divisão</span></a>
<a class="sourceLine" id="cb4-14" title="14"><span class="dv">5</span> <span class="op">/</span><span class="st"> </span><span class="dv">3</span></a>
<a class="sourceLine" id="cb4-15" title="15"><span class="co">## [1] 1.666667</span></a>
<a class="sourceLine" id="cb4-16" title="16"></a>
<a class="sourceLine" id="cb4-17" title="17"><span class="co"># potência</span></a>
<a class="sourceLine" id="cb4-18" title="18"><span class="dv">4</span> <span class="op">^</span><span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb4-19" title="19"><span class="co">## [1] 16</span></a>
<a class="sourceLine" id="cb4-20" title="20"></a>
<a class="sourceLine" id="cb4-21" title="21"><span class="co"># resto da divisão de 5 por 3</span></a>
<a class="sourceLine" id="cb4-22" title="22"><span class="dv">5</span> <span class="op">%%</span><span class="st"> </span><span class="dv">3</span></a>
<a class="sourceLine" id="cb4-23" title="23"><span class="co">## [1] 2</span></a>
<a class="sourceLine" id="cb4-24" title="24"></a>
<a class="sourceLine" id="cb4-25" title="25"><span class="co"># parte inteira da divisão de 5 por 3</span></a>
<a class="sourceLine" id="cb4-26" title="26"><span class="dv">5</span> <span class="op">%/%</span><span class="st"> </span><span class="dv">3</span>  </a>
<a class="sourceLine" id="cb4-27" title="27"><span class="co">## [1] 1</span></a></code></pre></div>
<p>Além do mais, as operações e suas precedências são mantidas como na matemática, ou seja, divisão e multiplicação são calculadas antes da adição e subtração. E os parênteses nunca são demais!</p>
<p>Uma outra forma de executar uma expressão é escrever o código no <strong>script</strong> e teclar <code>Ctrl + Enter</code>. Assim, o comando é enviado para o <strong>console</strong>, onde é diretamente executado. Essa operação é chamada de <strong>avaliar o código</strong> ou, popularmente, de <strong>rodar o código</strong>.</p>
<p>Se você digitar um comando incompleto, como <code>5 +</code>, e apertar <code>Enter</code>, o R mostrará um <code>+</code>, o que não tem nada a ver com somar alguma coisa. Isso significa que o R está esperando que você complete o seu comando. Termine o seu comando ou aperte <code>Esc</code> para recomeçar.</p>
<pre><code>&gt; 5 -
+ 
+ 5
[1] 0</code></pre>
<p>Se você digitar um comando que o R não reconhece, ele retornará uma mensagem de erro.</p>
<p>NÃO ENTRE EM PÂNICO!</p>
<p>Ele só está avisando que não conseguiu interpretar o comando. Você pode digitar outro comando normalmente em seguida.</p>
<pre><code>&gt; 5 % 2
Error: unexpected input in &quot;5 % 2&quot;
&gt; 5 ^ 2
[1] 25</code></pre>
</div>
<div id="objetos-e-classes" class="section level2">
<h2><span class="header-section-number">3.3</span> Objetos e Classes</h2>
<p>O R te permite salvar valores dentro de um objeto. Para isso, utilizamos o operador <code>&lt;-</code>.</p>
<p>No exemplo abaixo, salvamos o valor <code>1</code> em <code>a</code>. Sempre que avaliarmos o nome <code>a</code>, o R vai devolver o valor 1.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="co"># Salvando `1` em `a`</span></a>
<a class="sourceLine" id="cb7-2" title="2">a &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb7-3" title="3"></a>
<a class="sourceLine" id="cb7-4" title="4"><span class="co"># Avaliando o objeto `a`</span></a>
<a class="sourceLine" id="cb7-5" title="5">a</a>
<a class="sourceLine" id="cb7-6" title="6"><span class="co">## [1] 1</span></a></code></pre></div>
<div id="atenção" class="section level5 unnumbered">
<h5>Atenção!</h5>
<p>O R <strong>diferencia letras maiúsculas e minúsculas</strong>, isto é, <code>b</code> é considerado um objeto diferente de <code>B</code>. Rode o exemplo abaixo e observe que depois objetos diferentes são criados no <em>Environment</em>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">b &lt;-<span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb8-2" title="2">B &lt;-<span class="st"> </span><span class="dv">3</span></a>
<a class="sourceLine" id="cb8-3" title="3"></a>
<a class="sourceLine" id="cb8-4" title="4">b</a>
<a class="sourceLine" id="cb8-5" title="5"><span class="co">## [1] 2</span></a>
<a class="sourceLine" id="cb8-6" title="6">B</a>
<a class="sourceLine" id="cb8-7" title="7"><span class="co">## [1] 3</span></a></code></pre></div>
<p>O objeto mais importante para o cientista de dados é, claro, a base de dados. No R, uma base de dados é representa por objetos chamados de <em>data frames</em>. A seguir, vamos entender o que são esses objetos.</p>
</div>
<div id="data-frames-parte-1" class="section level3">
<h3><span class="header-section-number">3.3.1</span> Data frames (parte 1)</h3>
<p>Os <em>data frames</em> são de extrema importância no R, pois são os objetos que guardam os nossos dados. Eles são equivalentes a uma tabela do SQL ou uma planilha do Excel.</p>
<p>A principal característica de um <em>data frame</em> é possuir linhas e colunas<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>. Veja o exemplo abaixo:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">mtcars</a>
<a class="sourceLine" id="cb9-2" title="2"><span class="co">##                      mpg cyl  disp  hp drat    wt  qsec vs am gear carb</span></a>
<a class="sourceLine" id="cb9-3" title="3"><span class="co">## Mazda RX4           21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4</span></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="co">## Mazda RX4 Wag       21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4</span></a>
<a class="sourceLine" id="cb9-5" title="5"><span class="co">## Datsun 710          22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1</span></a>
<a class="sourceLine" id="cb9-6" title="6"><span class="co">## Hornet 4 Drive      21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1</span></a>
<a class="sourceLine" id="cb9-7" title="7"><span class="co">## Hornet Sportabout   18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2</span></a>
<a class="sourceLine" id="cb9-8" title="8"><span class="co">## Valiant             18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1</span></a>
<a class="sourceLine" id="cb9-9" title="9"><span class="co">## Duster 360          14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4</span></a>
<a class="sourceLine" id="cb9-10" title="10"><span class="co">## Merc 240D           24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2</span></a>
<a class="sourceLine" id="cb9-11" title="11"><span class="co">## Merc 230            22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2</span></a>
<a class="sourceLine" id="cb9-12" title="12"><span class="co">## Merc 280            19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4</span></a>
<a class="sourceLine" id="cb9-13" title="13"><span class="co">## Merc 280C           17.8   6 167.6 123 3.92 3.440 18.90  1  0    4    4</span></a>
<a class="sourceLine" id="cb9-14" title="14"><span class="co">## Merc 450SE          16.4   8 275.8 180 3.07 4.070 17.40  0  0    3    3</span></a>
<a class="sourceLine" id="cb9-15" title="15"><span class="co">## Merc 450SL          17.3   8 275.8 180 3.07 3.730 17.60  0  0    3    3</span></a>
<a class="sourceLine" id="cb9-16" title="16"><span class="co">## Merc 450SLC         15.2   8 275.8 180 3.07 3.780 18.00  0  0    3    3</span></a>
<a class="sourceLine" id="cb9-17" title="17"><span class="co">## Cadillac Fleetwood  10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4</span></a>
<a class="sourceLine" id="cb9-18" title="18"><span class="co">## Lincoln Continental 10.4   8 460.0 215 3.00 5.424 17.82  0  0    3    4</span></a>
<a class="sourceLine" id="cb9-19" title="19"><span class="co">## Chrysler Imperial   14.7   8 440.0 230 3.23 5.345 17.42  0  0    3    4</span></a>
<a class="sourceLine" id="cb9-20" title="20"><span class="co">## Fiat 128            32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1</span></a>
<a class="sourceLine" id="cb9-21" title="21"><span class="co">## Honda Civic         30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2</span></a>
<a class="sourceLine" id="cb9-22" title="22"><span class="co">## Toyota Corolla      33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1</span></a>
<a class="sourceLine" id="cb9-23" title="23"><span class="co">## Toyota Corona       21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1</span></a>
<a class="sourceLine" id="cb9-24" title="24"><span class="co">## Dodge Challenger    15.5   8 318.0 150 2.76 3.520 16.87  0  0    3    2</span></a>
<a class="sourceLine" id="cb9-25" title="25"><span class="co">## AMC Javelin         15.2   8 304.0 150 3.15 3.435 17.30  0  0    3    2</span></a>
<a class="sourceLine" id="cb9-26" title="26"><span class="co">## Camaro Z28          13.3   8 350.0 245 3.73 3.840 15.41  0  0    3    4</span></a>
<a class="sourceLine" id="cb9-27" title="27"><span class="co">## Pontiac Firebird    19.2   8 400.0 175 3.08 3.845 17.05  0  0    3    2</span></a>
<a class="sourceLine" id="cb9-28" title="28"><span class="co">## Fiat X1-9           27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1</span></a>
<a class="sourceLine" id="cb9-29" title="29"><span class="co">## Porsche 914-2       26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2</span></a>
<a class="sourceLine" id="cb9-30" title="30"><span class="co">## Lotus Europa        30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2</span></a>
<a class="sourceLine" id="cb9-31" title="31"><span class="co">## Ford Pantera L      15.8   8 351.0 264 4.22 3.170 14.50  0  1    5    4</span></a>
<a class="sourceLine" id="cb9-32" title="32"><span class="co">## Ferrari Dino        19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6</span></a>
<a class="sourceLine" id="cb9-33" title="33"><span class="co">## Maserati Bora       15.0   8 301.0 335 3.54 3.570 14.60  0  1    5    8</span></a>
<a class="sourceLine" id="cb9-34" title="34"><span class="co">## Volvo 142E          21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2</span></a></code></pre></div>
<p>O <code>mtcars</code> é um <em>data frame</em> nativo do R que contém informações sobre diversos modelos de carros. Ele possui 32 linhas e 11 colunas<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a></p>
<p>Nos próximos capítulos, os <em>data frames</em> serão o nosso principal objeto de estudos. Aprenderemos a selecionar, criar e modificar colunas, filtrar e ordenar linhas, juntar dois <em>data frames</em> e, a partir deles, construiremos gráficos e ajustaremos modelos.</p>
<p>Mas, antes disso, vamos estudar um pouco de estrutura de objetos dentro do R e assim entendermos o que de fato é um <em>data frame</em>.</p>
<p>Um <code>data frame</code> no R é o mesmo que uma tabela do SQL ou uma planilha do Excel, por isso são objetos muito importantes. Usualmente, nossos dados serão importados para um objeto <code>data.frame</code>. Em grande parte do curso, eles serão o principal objeto de estudo.</p>
</div>
<div id="objetos-atômicos" class="section level3">
<h3><span class="header-section-number">3.3.2</span> Objetos atômicos</h3>
<p>A classe de um objeto é muito importante dentro do R. É a partir dela que as funções e operadores conseguem saber exatamente o que fazer com um objeto.</p>
<p>Por exemplo, podemos somar dois números, mas não conseguimos somar duas letras (texto):</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb10-2" title="2"><span class="co">## [1] 2</span></a>
<a class="sourceLine" id="cb10-3" title="3"></a>
<a class="sourceLine" id="cb10-4" title="4"></a>
<a class="sourceLine" id="cb10-5" title="5"><span class="st">&quot;a&quot;</span> <span class="op">+</span><span class="st"> &quot;b&quot;</span></a>
<a class="sourceLine" id="cb10-6" title="6"><span class="co">## Error in &quot;a&quot; + &quot;b&quot;: non-numeric argument to binary operator</span></a></code></pre></div>
<p>O operador <code>+</code> verifica que <code>"a"</code> e <code>"b"</code> não são números (ou que a classe deles não é numérica) e devolve uma mensagem de erro informando isso.</p>
<p>Observe que para criar texto no R, colocamos os caracteres entre aspas. As aspas servem para diferenciar o nome de objetos dos textos (letras e palavras), comuns em variáveis categóricas.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1">a &lt;-<span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb11-2" title="2"></a>
<a class="sourceLine" id="cb11-3" title="3"><span class="co"># O objeto `a`, sem aspas</span></a>
<a class="sourceLine" id="cb11-4" title="4">a</a>
<a class="sourceLine" id="cb11-5" title="5"><span class="co">## [1] 10</span></a>
<a class="sourceLine" id="cb11-6" title="6"></a>
<a class="sourceLine" id="cb11-7" title="7"><span class="co"># A letra (texto) `a`, com aspas</span></a>
<a class="sourceLine" id="cb11-8" title="8"><span class="st">&quot;a&quot;</span></a>
<a class="sourceLine" id="cb11-9" title="9"><span class="co">## [1] &quot;a&quot;</span></a></code></pre></div>
<p>As classes mais básicas dentro do R são:</p>
<ul>
<li><em>numeric</em></li>
<li><em>character</em></li>
<li><em>logical</em></li>
</ul>
<p>Veja alguns exemplos:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="co"># numeric</span></a>
<a class="sourceLine" id="cb12-2" title="2"><span class="dv">1</span></a>
<a class="sourceLine" id="cb12-3" title="3"><span class="fl">0.10</span></a>
<a class="sourceLine" id="cb12-4" title="4"><span class="fl">0.95</span></a>
<a class="sourceLine" id="cb12-5" title="5">pi</a>
<a class="sourceLine" id="cb12-6" title="6"></a>
<a class="sourceLine" id="cb12-7" title="7"><span class="co"># characters</span></a>
<a class="sourceLine" id="cb12-8" title="8"><span class="st">&quot;a&quot;</span></a>
<a class="sourceLine" id="cb12-9" title="9"><span class="st">&quot;1&quot;</span></a>
<a class="sourceLine" id="cb12-10" title="10"><span class="st">&quot;positivo&quot;</span></a>
<a class="sourceLine" id="cb12-11" title="11"></a>
<a class="sourceLine" id="cb12-12" title="12"><span class="co"># logical</span></a>
<a class="sourceLine" id="cb12-13" title="13"><span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb12-14" title="14"><span class="ot">FALSE</span></a></code></pre></div>
<p>Um objeto de qualquer uma dessas classes é chamado de <strong>objeto atômico</strong>.</p>
<p>Esse nome se deve ao fato de que essas classes não se misturam, isto é, para um objeto ter a classe <code>numeric</code> todos os seus valores precisam ser numéricos.</p>
<p>Mas como atribuir mais de um valor a um mesmo objeto? Para isso, precisamos criar <strong>vetores</strong>.</p>
</div>
<div id="vetores" class="section level3">
<h3><span class="header-section-number">3.3.3</span> Vetores</h3>
<p>Vetores no R são os objetos mais simples que podem guardar objetos atômicos.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1">vetor1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb13-2" title="2">vetor2 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>)</a>
<a class="sourceLine" id="cb13-3" title="3"></a>
<a class="sourceLine" id="cb13-4" title="4">vetor1</a>
<a class="sourceLine" id="cb13-5" title="5"><span class="co">## [1] 1 2 3 4</span></a>
<a class="sourceLine" id="cb13-6" title="6">vetor2</a>
<a class="sourceLine" id="cb13-7" title="7"><span class="co">## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</span></a></code></pre></div>
<p>De forma bastante intuitiva, você pode fazer operações com vetores.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1">vetor1 <span class="op">-</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb14-2" title="2"><span class="co">## [1] 0 1 2 3</span></a></code></pre></div>
<p>Quando você faz <code>vetor1 - 1</code>, o R subtrai <code>1</code> de cada um dos elementos do vetor. O mesmo acontece quando você faz qualquer operação aritmética com vetores no R.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1">vetor1 <span class="op">/</span><span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb15-2" title="2">vetor1 <span class="op">*</span><span class="st"> </span><span class="dv">10</span></a></code></pre></div>
<p>Você também pode fazer operações que envolvem mais de um vetor:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1">vetor1 <span class="op">*</span><span class="st"> </span>vetor1</a>
<a class="sourceLine" id="cb16-2" title="2"><span class="co">## [1]  1  4  9 16</span></a></code></pre></div>
<p>Neste caso, o R irá alinhar os dois vetores e multiplicar elemento por elemento. Isso pode ficar um pouco confuso quando os dois vetores não possuem o mesmo tamanho:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1">vetor2 &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">3</span></a>
<a class="sourceLine" id="cb17-2" title="2">vetor1 <span class="op">*</span><span class="st"> </span>vetor2</a>
<a class="sourceLine" id="cb17-3" title="3"><span class="co">## Warning in vetor1 * vetor2: longer object length is not a multiple of shorter</span></a>
<a class="sourceLine" id="cb17-4" title="4"><span class="co">## object length</span></a>
<a class="sourceLine" id="cb17-5" title="5"><span class="co">## [1] 1 4 9 4</span></a></code></pre></div>
<p>O R alinhou os dois vetores e, como eles não possuíam o mesmo tamanho, foi repetindo o vetor menor até completar o vetor maior. Esse comportamento é chamado de <strong>reciclagem</strong> e é útil para fazer operações elemento por elemento (vetorizadamente), mas às vezes pode ser confuso. Com o tempo, você aprenderá a se aproveitar dele.</p>
</div>
<div id="classes" class="section level3">
<h3><span class="header-section-number">3.3.4</span> Classes</h3>
<p>Para saber a classe de um objeto, você pode usar a função <code>class()</code>.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1">x &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb18-2" title="2"><span class="kw">class</span>(x)</a>
<a class="sourceLine" id="cb18-3" title="3"><span class="co">## [1] &quot;numeric&quot;</span></a>
<a class="sourceLine" id="cb18-4" title="4"></a>
<a class="sourceLine" id="cb18-5" title="5">y &lt;-<span class="st"> &quot;a&quot;</span></a>
<a class="sourceLine" id="cb18-6" title="6"><span class="kw">class</span>(y)</a>
<a class="sourceLine" id="cb18-7" title="7"><span class="co">## [1] &quot;character&quot;</span></a>
<a class="sourceLine" id="cb18-8" title="8"></a>
<a class="sourceLine" id="cb18-9" title="9">z &lt;-<span class="st"> </span><span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb18-10" title="10"><span class="kw">class</span>(z)</a>
<a class="sourceLine" id="cb18-11" title="11"><span class="co">## [1] &quot;logical&quot;</span></a></code></pre></div>
<p>Um vetor tem sempre a mesma classe dos objetos que guarda.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" title="1"><span class="kw">class</span>(vetor1)</a>
<a class="sourceLine" id="cb19-2" title="2"><span class="co">## [1] &quot;numeric&quot;</span></a>
<a class="sourceLine" id="cb19-3" title="3"><span class="kw">class</span>(vetor2)</a>
<a class="sourceLine" id="cb19-4" title="4"><span class="co">## [1] &quot;integer&quot;</span></a></code></pre></div>
</div>
<div id="coerção" class="section level3">
<h3><span class="header-section-number">3.3.5</span> Coerção</h3>
<div id="misturando-objetos" class="section level4">
<h4><span class="header-section-number">3.3.5.1</span> Misturando objetos</h4>
<blockquote>
<p>Vetores são homogêneos. Os elementos de um vetor são sempre da mesma classe. Ou todos são numéricos, ou são todos character, ou todos são lógicos etc. Não dá para ter um número e um character no mesmo vetor, por exemplo.</p>
</blockquote>
<p>Se colocarmos duas ou mais classes diferentes dentro de um mesmo vetor, o R vai forçar que todos os elementos passem a pertencer à mesma classe. O número <code>1.7</code> viraria <code>"1.7"</code> se fosse colocado ao lado de um <code>"a"</code>.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1">y &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">1.7</span>, <span class="st">&quot;a&quot;</span>)  <span class="co"># character</span></a>
<a class="sourceLine" id="cb20-2" title="2">y &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="dv">2</span>)   <span class="co"># numeric</span></a>
<a class="sourceLine" id="cb20-3" title="3">y &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="st">&quot;a&quot;</span>) <span class="co"># character</span></a></code></pre></div>
<p>A ordem de precedência é:</p>
<p><strong>DOMINANTE</strong> — <code>character &gt; complex &gt; numeric &gt; integer &gt; logical</code> — <strong>RECESSIVO</strong></p>
</div>
<div id="forçando-classes-explicitamente" class="section level4">
<h4><span class="header-section-number">3.3.5.2</span> Forçando classes explicitamente</h4>
<p>Você pode coagir um objeto a ser de uma classe específica com as funções <code>as.character()</code>, <code>as.numeric()</code>, <code>as.integer()</code> e <code>as.logical()</code>. É equivalente à função <code>convert()</code> do SQL.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" title="1">x &lt;-<span class="st"> </span><span class="dv">0</span><span class="op">:</span><span class="dv">4</span></a>
<a class="sourceLine" id="cb21-2" title="2"><span class="kw">class</span>(x)</a>
<a class="sourceLine" id="cb21-3" title="3"><span class="co">## [1] &quot;integer&quot;</span></a>
<a class="sourceLine" id="cb21-4" title="4"><span class="kw">as.numeric</span>(x)</a>
<a class="sourceLine" id="cb21-5" title="5"><span class="co">## [1] 0 1 2 3 4</span></a>
<a class="sourceLine" id="cb21-6" title="6"><span class="kw">as.logical</span>(x)</a>
<a class="sourceLine" id="cb21-7" title="7"><span class="co">## [1] FALSE  TRUE  TRUE  TRUE  TRUE</span></a>
<a class="sourceLine" id="cb21-8" title="8"><span class="kw">as.character</span>(x)</a>
<a class="sourceLine" id="cb21-9" title="9"><span class="co">## [1] &quot;0&quot; &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot;</span></a></code></pre></div>
<p>Se o R não entender como coagir uma classe na outra, ele soltará um <code>warning</code> informado que colocou <code>NA</code> no lugar.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" title="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>)</a>
<a class="sourceLine" id="cb22-2" title="2"><span class="kw">as.numeric</span>(x)</a>
<a class="sourceLine" id="cb22-3" title="3"><span class="co">## Warning: NAs introduced by coercion</span></a>
<a class="sourceLine" id="cb22-4" title="4"><span class="co">## [1] NA NA NA</span></a></code></pre></div>
<blockquote>
<p>Observação. O <b>NA</b> tem o mesmo papel que o <b>null</b> do SQL. Porém, há um <b>NULL</b> no R também, com diferenças sutis que vamos abordar mais adiante.</p>
</blockquote>
</div>
</div>
<div id="matrizes" class="section level3">
<h3><span class="header-section-number">3.3.6</span> Matrizes</h3>
<p>Matrizes são vetores com duas dimensões (e por isso só possuem elementos de uma mesma classe).</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" title="1">m &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="dt">nrow =</span> <span class="dv">2</span>, <span class="dt">ncol =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb23-2" title="2">m</a>
<a class="sourceLine" id="cb23-3" title="3"><span class="co">##      [,1] [,2] [,3]</span></a>
<a class="sourceLine" id="cb23-4" title="4"><span class="co">## [1,]    1    3    5</span></a>
<a class="sourceLine" id="cb23-5" title="5"><span class="co">## [2,]    2    4    6</span></a>
<a class="sourceLine" id="cb23-6" title="6"><span class="kw">dim</span>(m) <span class="co"># funçăo dim() retorna a dimensăo do objeto.</span></a>
<a class="sourceLine" id="cb23-7" title="7"><span class="co">## [1] 2 3</span></a></code></pre></div>
<p>Repare que os números de 1 a 6 foram dispostos na matriz coluna por coluna (<em>column-wise</em>), ou seja, preenchendo de cima para baixo e depois da esquerda para a direita.</p>
<p><strong>Operações úteis</strong></p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" title="1">m[<span class="dv">3</span>,  ]   <span class="co"># seleciona a terceira linha</span></a>
<a class="sourceLine" id="cb24-2" title="2">m[ , <span class="dv">2</span>]   <span class="co"># seleciona a segunda coluna</span></a>
<a class="sourceLine" id="cb24-3" title="3">m[<span class="dv">1</span>, <span class="dv">2</span>]   <span class="co"># seleciona o primeiro elemento da segunda coluna</span></a>
<a class="sourceLine" id="cb24-4" title="4"><span class="kw">t</span>(m)      <span class="co"># matriz transposta</span></a>
<a class="sourceLine" id="cb24-5" title="5">m <span class="op">%*%</span><span class="st"> </span>n   <span class="co"># multiplicação matricial</span></a>
<a class="sourceLine" id="cb24-6" title="6"><span class="kw">solve</span>(m)  <span class="co"># matriz inversa de m</span></a></code></pre></div>
</div>
<div id="fatores" class="section level3">
<h3><span class="header-section-number">3.3.7</span> Fatores</h3>
<p>Fatores podem ser vistos como vetores de inteiros que possuem rótulos (levels).</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" title="1">sexo &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;M&quot;</span>, <span class="st">&quot;H&quot;</span>, <span class="st">&quot;H&quot;</span>, <span class="st">&quot;H&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;H&quot;</span>)</a>
<a class="sourceLine" id="cb25-2" title="2">fator &lt;-<span class="st"> </span><span class="kw">as.factor</span>(sexo)</a>
<a class="sourceLine" id="cb25-3" title="3">fator</a>
<a class="sourceLine" id="cb25-4" title="4"><span class="co">## [1] M H H H M M H</span></a>
<a class="sourceLine" id="cb25-5" title="5"><span class="co">## Levels: H M</span></a>
<a class="sourceLine" id="cb25-6" title="6"><span class="kw">as.numeric</span>(fator)</a>
<a class="sourceLine" id="cb25-7" title="7"><span class="co">## [1] 2 1 1 1 2 2 1</span></a></code></pre></div>
<p>Eles são úteis para representar uma variável categórica (nominal e ordinal). Na modelagem, eles serão tratados de maneira especial em funções como <code>lm()</code> e <code>glm()</code>.</p>
<p>A função <code>levels()</code> retorna os rótulos do fator:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" title="1"><span class="kw">levels</span>(fator)</a>
<a class="sourceLine" id="cb26-2" title="2"><span class="co">## [1] &quot;H&quot; &quot;M&quot;</span></a></code></pre></div>
<p>A ordem das categorias de um fator pode importar. Como exemplo, temos as caselas de referência de modelos estatísticos e a ordem das barras de um gráfico. Para ajudar nesta tarefa, consulte o pacote <a href="https://github.com/tidyverse/forcats">forcats</a>.</p>
<blockquote>
<p>Um erro comum e desastroso. Quando um vetor de números está como <b>factor</b>, ao tentar transformá-lo em <b>numeric</b>, você receberá um vetor de inteiros que não tem nada a ver com os valores originais!</p>
</blockquote>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" title="1">numeros &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;10&quot;</span>, <span class="st">&quot;55&quot;</span>, <span class="st">&quot;55&quot;</span>, <span class="st">&quot;12&quot;</span>, <span class="st">&quot;10&quot;</span>, <span class="st">&quot;-5&quot;</span>, <span class="st">&quot;-90&quot;</span>))</a>
<a class="sourceLine" id="cb27-2" title="2"></a>
<a class="sourceLine" id="cb27-3" title="3"><span class="kw">as.numeric</span>(numeros)</a>
<a class="sourceLine" id="cb27-4" title="4"><span class="co">## [1] 3 5 5 4 3 1 2</span></a>
<a class="sourceLine" id="cb27-5" title="5"><span class="co">#Por essa eu năo esperava!</span></a></code></pre></div>
<p>Para evitar isso, use <code>as.character()</code> antes de transformar para número.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" title="1"><span class="kw">as.numeric</span>(<span class="kw">as.character</span>(numeros))</a>
<a class="sourceLine" id="cb28-2" title="2"><span class="co">## [1]  10  55  55  12  10  -5 -90</span></a>
<a class="sourceLine" id="cb28-3" title="3"><span class="co"># Agora está OK!</span></a></code></pre></div>
</div>
<div id="listas" class="section level3">
<h3><span class="header-section-number">3.3.8</span> Listas</h3>
<p>Listas são um tipo especial de vetor que aceita elementos de classes diferentes.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" title="1">x &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="st">&quot;Z&quot;</span>, <span class="ot">TRUE</span>, <span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>))</a>
<a class="sourceLine" id="cb29-2" title="2">x</a>
<a class="sourceLine" id="cb29-3" title="3"><span class="co">## [[1]]</span></a>
<a class="sourceLine" id="cb29-4" title="4"><span class="co">## [1] 1 2 3 4 5</span></a>
<a class="sourceLine" id="cb29-5" title="5"><span class="co">## </span></a>
<a class="sourceLine" id="cb29-6" title="6"><span class="co">## [[2]]</span></a>
<a class="sourceLine" id="cb29-7" title="7"><span class="co">## [1] &quot;Z&quot;</span></a>
<a class="sourceLine" id="cb29-8" title="8"><span class="co">## </span></a>
<a class="sourceLine" id="cb29-9" title="9"><span class="co">## [[3]]</span></a>
<a class="sourceLine" id="cb29-10" title="10"><span class="co">## [1] TRUE</span></a>
<a class="sourceLine" id="cb29-11" title="11"><span class="co">## </span></a>
<a class="sourceLine" id="cb29-12" title="12"><span class="co">## [[4]]</span></a>
<a class="sourceLine" id="cb29-13" title="13"><span class="co">## [1] &quot;a&quot; &quot;b&quot;</span></a></code></pre></div>
<p>É um dos objetos mais importantes para armazenar dados e vale a pena saber manuseá-los bem. Existem muitas funções que fazem das listas objetos incrivelmente úteis.</p>
<p>Criamos uma lista com a função <code>list()</code>, que aceita um número arbitrário de elementos. Listas aceitam QUALQUER tipo de objeto. Podemos ter listas dentro de listas, por exemplo. Como para quase todas as classes de objetos no R, as funções <code>is.list()</code> e <code>as.list()</code> também existem.</p>
<p>Na lista <code>pedido</code> abaixo, temos <code>numeric</code>, <code>Date</code>, <code>character</code>, vetor de <code>character</code> e <code>list</code> contida em uma lista:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" title="1">pedido &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">pedido_id =</span> <span class="dv">8001406</span>,</a>
<a class="sourceLine" id="cb30-2" title="2">               <span class="dt">pedido_registro =</span> <span class="kw">as.Date</span>(<span class="st">&quot;2017-05-25&quot;</span>),</a>
<a class="sourceLine" id="cb30-3" title="3">               <span class="dt">nome =</span> <span class="st">&quot;Athos&quot;</span>, </a>
<a class="sourceLine" id="cb30-4" title="4">               <span class="dt">sobrenome =</span> <span class="st">&quot;Petri Damiani&quot;</span>, </a>
<a class="sourceLine" id="cb30-5" title="5">               <span class="dt">cpf =</span> <span class="st">&quot;12345678900&quot;</span>, </a>
<a class="sourceLine" id="cb30-6" title="6">               <span class="dt">email =</span> <span class="st">&quot;athos.damiani@gmail.com&quot;</span>, </a>
<a class="sourceLine" id="cb30-7" title="7">               <span class="dt">qualidades =</span> <span class="kw">c</span>(<span class="st">&quot;incrível&quot;</span>, <span class="st">&quot;impressionante&quot;</span>),</a>
<a class="sourceLine" id="cb30-8" title="8">               <span class="dt">itens =</span> <span class="kw">list</span>(</a>
<a class="sourceLine" id="cb30-9" title="9">                 <span class="kw">list</span>(<span class="dt">descricao =</span> <span class="st">&quot;Ferrari&quot;</span>, </a>
<a class="sourceLine" id="cb30-10" title="10">                      <span class="dt">frete =</span> <span class="dv">0</span>, </a>
<a class="sourceLine" id="cb30-11" title="11">                      <span class="dt">valor =</span> <span class="dv">500000</span>),</a>
<a class="sourceLine" id="cb30-12" title="12">                 <span class="kw">list</span>(<span class="dt">descricao =</span> <span class="st">&quot;Dolly&quot;</span>, </a>
<a class="sourceLine" id="cb30-13" title="13">                      <span class="dt">frete =</span> <span class="fl">1.5</span>, </a>
<a class="sourceLine" id="cb30-14" title="14">                      <span class="dt">valor =</span> <span class="fl">3.90</span>)</a>
<a class="sourceLine" id="cb30-15" title="15">               ), </a>
<a class="sourceLine" id="cb30-16" title="16">               <span class="dt">endereco =</span> <span class="kw">list</span>(<span class="dt">entrega =</span> <span class="kw">list</span>(<span class="dt">logradouro =</span> <span class="st">&quot;Rua da Glória&quot;, </span></a>
<a class="sourceLine" id="cb30-17" title="17"><span class="st">                                              numero = &quot;</span><span class="dv">123</span><span class="st">&quot;,</span></a>
<a class="sourceLine" id="cb30-18" title="18"><span class="st">                                              complemento = &quot;</span>apto <span class="dv">71</span><span class="st">&quot;),</span></a>
<a class="sourceLine" id="cb30-19" title="19"><span class="st">                               cobranca = list(logradouro = &quot;</span>Rua Jose de Oliveira Coutinho<span class="st">&quot;,</span></a>
<a class="sourceLine" id="cb30-20" title="20"><span class="st">                                               numero = &quot;</span><span class="dv">151</span><span class="st">&quot;,</span></a>
<a class="sourceLine" id="cb30-21" title="21"><span class="st">                                               complemento = &quot;</span>5o andar<span class="st">&quot;)</span></a>
<a class="sourceLine" id="cb30-22" title="22"><span class="st">               )</span></a>
<a class="sourceLine" id="cb30-23" title="23"><span class="st">)</span></a></code></pre></div>
<p><strong>Operações úteis</strong></p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" title="1">pedido<span class="op">$</span>cpf     <span class="co"># elemento chamado &#39;cpf&#39;</span></a>
<a class="sourceLine" id="cb31-2" title="2">pedido[<span class="dv">1</span>]      <span class="co"># nova lista com apenas o primeiro elemento</span></a>
<a class="sourceLine" id="cb31-3" title="3">pedido[[<span class="dv">2</span>]]    <span class="co"># segundo elemento</span></a>
<a class="sourceLine" id="cb31-4" title="4">pedido[<span class="st">&quot;nome&quot;</span>] <span class="co"># nova lista com apenas o elemento chamado &#39;nome&#39;</span></a></code></pre></div>
<p>Certamente você se deparará com listas quando for fazer análise de dados com o R. Nos tópicos mais aplicados, iremos aprofundar sobre o tema. O pacote <a href="https://github.com/hadley/purrr">purrr</a> contribui com funcionalidades incríveis para listas.</p>
</div>
<div id="data-frames-parte-2" class="section level3">
<h3><span class="header-section-number">3.3.9</span> Data frames (parte 2)</h3>
<p>Os <code>data.frame</code>’s são listas especiais em que todos os elementos possuem <strong>o mesmo comprimento</strong>. Cada elemento dessa lista pode ser pensado como uma coluna da tabela. Seu comprimento representa o número de linhas.</p>
<p>Já que são listas, essas colunas podem ser de classes diferentes. Essa é a grande diferença entre <code>data.frame</code>’s e matrizes. Algumas funções úteis para trabalhar com <code>data.frame</code>’s :</p>
<ul>
<li><code>head()</code> - Mostra as primeiras 6 linhas.</li>
<li><code>tail()</code> - Mostra as últimas 6 linhas.</li>
<li><code>dim()</code> - Número de linhas e de colunas.</li>
<li><code>names()</code> - Os nomes das colunas (variáveis).</li>
<li><code>str()</code> - Estrutura do data.frame. Mostra, entre outras coisas, as classes de cada coluna.</li>
<li><code>cbind()</code> - Acopla duas tabelas lado a lado.</li>
<li><code>rbind()</code> - Empilha duas tabelas.</li>
</ul>
<p>O exemplo abaixo mostra que uma lista pode virar <code>data.frame</code> apenas se todos os elementos tiverem o mesmo comprimento.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" title="1">minha_lista &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>), <span class="dt">y =</span> <span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>))</a>
<a class="sourceLine" id="cb32-2" title="2"><span class="kw">as.data.frame</span>(minha_lista)</a>
<a class="sourceLine" id="cb32-3" title="3"><span class="co">## Error in (function (..., row.names = NULL, check.rows = FALSE, check.names = TRUE, : arguments imply differing number of rows: 3, 2</span></a>
<a class="sourceLine" id="cb32-4" title="4"></a>
<a class="sourceLine" id="cb32-5" title="5">minha_lista &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>), <span class="dt">y =</span> <span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>))</a>
<a class="sourceLine" id="cb32-6" title="6"><span class="kw">as.data.frame</span>(minha_lista)</a>
<a class="sourceLine" id="cb32-7" title="7"><span class="co">##   x y</span></a>
<a class="sourceLine" id="cb32-8" title="8"><span class="co">## 1 1 a</span></a>
<a class="sourceLine" id="cb32-9" title="9"><span class="co">## 2 2 b</span></a>
<a class="sourceLine" id="cb32-10" title="10"><span class="co">## 3 3 c</span></a></code></pre></div>
</div>
</div>
<div id="valores-especiais" class="section level2">
<h2><span class="header-section-number">3.4</span> Valores especiais</h2>
<p>Existem valores reservados para representar dados faltantes, infinitos, e indefinições matemáticas.</p>
<ul>
<li><strong>NA</strong> (Not Available) significa dado faltante/indisponível. É o <code>null</code> do SQL ou o <code>.</code> do SAS. O <code>NA</code> tem uma classe, ou seja, podemos ter <code>NA</code> numeric, <code>NA</code> character etc.</li>
<li><strong>NaN</strong> (Not a Number) representa indefinições matemáticas, como <code>0/0</code> e <code>log(-1)</code>. Um <code>NaN</code> é um <code>NA</code>, mas a recíproca não é verdadeira.</li>
<li><strong>Inf</strong> (Infinito) é um número muito grande ou o limite matemático, por exemplo, <code>1/0</code> e <code>10^310</code>. Aceita sinal negativo <code>-Inf</code>.</li>
<li><strong>NULL</strong> representa a ausência de informação. Conceitualmente, a diferença entre <code>NA</code> e <code>NULL</code> é sutil, mas, no R, o <code>NA</code> está mais alinhado com os conceitos de estatística (ou como gostaríamos que os dados faltantes se comportassem em análise de dados) e o <code>NULL</code> está em sintonia com comportamentos de lógica de programação.</li>
<li>Use as funções <code>is.na()</code>, <code>is.nan()</code>, <code>is.infinite()</code> e <code>is.null()</code> para testar se um objeto é um desses valores.</li>
</ul>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" title="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">NaN</span>, <span class="ot">Inf</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="ot">NA</span>)</a>
<a class="sourceLine" id="cb33-2" title="2"><span class="kw">is.na</span>(x)</a>
<a class="sourceLine" id="cb33-3" title="3"><span class="co">## [1]  TRUE FALSE FALSE FALSE FALSE  TRUE</span></a>
<a class="sourceLine" id="cb33-4" title="4"><span class="kw">is.nan</span>(x)</a>
<a class="sourceLine" id="cb33-5" title="5"><span class="co">## [1]  TRUE FALSE FALSE FALSE FALSE FALSE</span></a></code></pre></div>
</div>
<div id="controles-de-fluxo" class="section level2">
<h2><span class="header-section-number">3.5</span> Controles de Fluxo</h2>
<p>Como toda boa linguagem de programação, o R possui estruturas de <code>if</code>’s, <code>else</code>’s, <code>for</code>’s, <code>while</code>’s etc. Esses <strong>controles de fluxo</strong> são importantes na hora de programar.</p>
<div id="if-e-else" class="section level3">
<h3><span class="header-section-number">3.5.1</span> IF e ELSE</h3>
<p>O seguinte trecho de código só será executado se o objeto <code>x</code> for igual a 1. Repare que a condição de igualdade é representada por dois iguais <code>==</code>.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" title="1">x &lt;-<span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb34-2" title="2"></a>
<a class="sourceLine" id="cb34-3" title="3"><span class="cf">if</span>(x <span class="op">==</span><span class="st"> </span><span class="dv">1</span>) {         </a>
<a class="sourceLine" id="cb34-4" title="4">  <span class="kw">Sys.time</span>()      <span class="co"># Devolve a data/hora no momento da execução.</span></a>
<a class="sourceLine" id="cb34-5" title="5">}</a></code></pre></div>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" title="1">x &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb35-2" title="2"></a>
<a class="sourceLine" id="cb35-3" title="3"><span class="cf">if</span>(x <span class="op">==</span><span class="st"> </span><span class="dv">1</span>) {</a>
<a class="sourceLine" id="cb35-4" title="4">  <span class="kw">Sys.time</span>()</a>
<a class="sourceLine" id="cb35-5" title="5">}</a>
<a class="sourceLine" id="cb35-6" title="6"><span class="co">## [1] &quot;2020-04-20 20:41:26 -03&quot;</span></a></code></pre></div>
<p>O R só vai executar o que está na expressão dentro das chaves <code>{}</code> se o que estiver dentro dos parênteses <code>()</code> retornar <code>TRUE</code>.</p>
<p>A sintaxe com o <code>else</code> e o <code>if else</code> é</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" title="1"><span class="cf">if</span>(x <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>) {</a>
<a class="sourceLine" id="cb36-2" title="2">  </a>
<a class="sourceLine" id="cb36-3" title="3">  sinal &lt;-<span class="st"> &quot;negativo&quot;</span></a>
<a class="sourceLine" id="cb36-4" title="4">  </a>
<a class="sourceLine" id="cb36-5" title="5">} <span class="cf">else</span> <span class="cf">if</span>(x <span class="op">==</span><span class="st"> </span><span class="dv">0</span>) {</a>
<a class="sourceLine" id="cb36-6" title="6">  </a>
<a class="sourceLine" id="cb36-7" title="7">  sinal &lt;-<span class="st"> &quot;neutro&quot;</span></a>
<a class="sourceLine" id="cb36-8" title="8">  </a>
<a class="sourceLine" id="cb36-9" title="9">} <span class="cf">else</span> <span class="cf">if</span>(x <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) {</a>
<a class="sourceLine" id="cb36-10" title="10">  </a>
<a class="sourceLine" id="cb36-11" title="11">  sinal &lt;-<span class="st"> &quot;positivo&quot;</span></a>
<a class="sourceLine" id="cb36-12" title="12">}</a>
<a class="sourceLine" id="cb36-13" title="13"></a>
<a class="sourceLine" id="cb36-14" title="14">sinal</a>
<a class="sourceLine" id="cb36-15" title="15"><span class="co">## [1] &quot;positivo&quot;</span></a></code></pre></div>
<div class="admonition note">
<p class="admonition-title">
Diferença entre SQL e R nas comparações lógicas
</p>
<p>
<b>Igualdade</b>: no SQL é só um sinal de igual: &lt;2 = 1. No R são dois: 2 == 1.
<br>
<b>Diferença</b>: teste de diferente no R é != em vez de de &lt;&gt;.
<br>
<b>Negação</b>: em vez de usar a palavra “not” igual ao SQL, usamos !. Por exemplo, “entidade_id not in (‘100515’)” fica “!entidade_id %in% c(‘100515’)”.
</p>
</div>
</div>
<div id="for" class="section level3">
<h3><span class="header-section-number">3.5.2</span> for</h3>
<p>Vamos usar o <code>for</code> para somar todos os elementos de um vetor.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" title="1">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span>   <span class="co"># Cria um vetor com a sequência 1, 2, ..., 10.</span></a>
<a class="sourceLine" id="cb37-2" title="2">soma &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb37-3" title="3"></a>
<a class="sourceLine" id="cb37-4" title="4"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>) {</a>
<a class="sourceLine" id="cb37-5" title="5">  soma &lt;-<span class="st"> </span>soma <span class="op">+</span><span class="st"> </span>x[i]</a>
<a class="sourceLine" id="cb37-6" title="6">}</a>
<a class="sourceLine" id="cb37-7" title="7"></a>
<a class="sourceLine" id="cb37-8" title="8">soma</a>
<a class="sourceLine" id="cb37-9" title="9"><span class="co">## [1] 55</span></a></code></pre></div>
<p>De forma equivalente, podemos usar diretamente a função <code>sum()</code>.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" title="1"><span class="kw">sum</span>(x)</a>
<a class="sourceLine" id="cb38-2" title="2"><span class="co">## [1] 55</span></a></code></pre></div>
<p>Agora, vamos imprimir na tela o resultado da divisão de cada elemento de um vetor por dois. Para isso, utilizaremos a função <code>print()</code>.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" title="1">vetor &lt;-<span class="st"> </span><span class="dv">30</span><span class="op">:</span><span class="dv">35</span></a>
<a class="sourceLine" id="cb39-2" title="2">indices &lt;-<span class="st"> </span><span class="kw">seq_along</span>(vetor) <span class="co"># cria o vetor de índices segundo o tamanho </span></a>
<a class="sourceLine" id="cb39-3" title="3">                            <span class="co"># do objeto vetor.   </span></a>
<a class="sourceLine" id="cb39-4" title="4"><span class="cf">for</span>(i <span class="cf">in</span> indices) {</a>
<a class="sourceLine" id="cb39-5" title="5">  <span class="kw">print</span>(vetor[<span class="dv">1</span><span class="op">:</span>i] <span class="op">/</span><span class="st"> </span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb39-6" title="6">}</a>
<a class="sourceLine" id="cb39-7" title="7"><span class="co">## [1] 15</span></a>
<a class="sourceLine" id="cb39-8" title="8"><span class="co">## [1] 15.0 15.5</span></a>
<a class="sourceLine" id="cb39-9" title="9"><span class="co">## [1] 15.0 15.5 16.0</span></a>
<a class="sourceLine" id="cb39-10" title="10"><span class="co">## [1] 15.0 15.5 16.0 16.5</span></a>
<a class="sourceLine" id="cb39-11" title="11"><span class="co">## [1] 15.0 15.5 16.0 16.5 17.0</span></a>
<a class="sourceLine" id="cb39-12" title="12"><span class="co">## [1] 15.0 15.5 16.0 16.5 17.0 17.5</span></a></code></pre></div>
<p>No trecho de código acima, preste atenção no resultado individual de cada uma das operações para entender como o R funciona.</p>
</div>
<div id="while" class="section level3">
<h3><span class="header-section-number">3.5.3</span> while</h3>
<p>O código a seguir irá imprimir na tela o valor de <code>i</code> enquanto este objeto for menor que 3. No momento em que a condição dentro das chaves <code>{}</code> não for mais respeitada, o processo será interrompido.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" title="1">i &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb40-2" title="2"><span class="cf">while</span>(i <span class="op">&lt;</span><span class="st"> </span><span class="dv">3</span>){</a>
<a class="sourceLine" id="cb40-3" title="3">  <span class="kw">print</span>(i)</a>
<a class="sourceLine" id="cb40-4" title="4">  i =<span class="st"> </span>i <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb40-5" title="5">}</a>
<a class="sourceLine" id="cb40-6" title="6"><span class="co">## [1] 1</span></a>
<a class="sourceLine" id="cb40-7" title="7"><span class="co">## [1] 2</span></a></code></pre></div>
<p>É importante que o valor de i seja atualizado em cada interação, caso contrário a função entrará em um loop infinito.</p>
<p>Vamos usar o <code>while</code> para encontrar uma aproximação da solução de <span class="math inline">\(\sqrt{x} = x\)</span>. Este método é conhecido como Interação do ponto fixo e pode ser usado no cálculo aproximado de soluções de equações de uma variável real.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" title="1"></a>
<a class="sourceLine" id="cb41-2" title="2">x &lt;-<span class="st"> </span><span class="dv">4</span></a>
<a class="sourceLine" id="cb41-3" title="3">erro &lt;-<span class="st"> </span><span class="dv">100</span></a>
<a class="sourceLine" id="cb41-4" title="4"><span class="cf">while</span> (<span class="kw">abs</span>(erro) <span class="op">&gt;</span><span class="st"> </span><span class="fl">0.1</span>) {</a>
<a class="sourceLine" id="cb41-5" title="5">  erro &lt;-<span class="st"> </span>(<span class="kw">sqrt</span>(x)) <span class="op">-</span><span class="st"> </span>x</a>
<a class="sourceLine" id="cb41-6" title="6">  x &lt;-<span class="st"> </span><span class="kw">sqrt</span>(x)</a>
<a class="sourceLine" id="cb41-7" title="7">}</a>
<a class="sourceLine" id="cb41-8" title="8"><span class="kw">print</span>(x)</a>
<a class="sourceLine" id="cb41-9" title="9"><span class="co">## [1] 1.090508</span></a></code></pre></div>
<p>Quando a diferença entre <span class="math inline">\(\sqrt{x}\)</span> e <span class="math inline">\(x\)</span> ficou menor que 0.1, o loop foi interrompido.
Vemos que solução aproximada da equação <span class="math inline">\(\sqrt{x} = x\)</span> dada pelo algorítmo não difere muito da solução real <span class="math inline">\(x=1\)</span>.</p>
<p>Para finalizar, listamos na tabela abaixo os principais operadores lógicos.</p>
<table>
<thead>
<tr class="header">
<th align="left">Operador</th>
<th align="left">Descrição</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">x &lt; y</td>
<td align="left">x menor que y?</td>
</tr>
<tr class="even">
<td align="left">x &lt;= y</td>
<td align="left">x menor ou igual a y?</td>
</tr>
<tr class="odd">
<td align="left">x &gt; y</td>
<td align="left">x maior que y?</td>
</tr>
<tr class="even">
<td align="left">x &gt;= y</td>
<td align="left">x maior ou igual a y?</td>
</tr>
<tr class="odd">
<td align="left">x == y</td>
<td align="left">x igual a y?</td>
</tr>
<tr class="even">
<td align="left">x != y</td>
<td align="left">x diferente de y?</td>
</tr>
<tr class="odd">
<td align="left">!x</td>
<td align="left">Negativa de x</td>
</tr>
<tr class="even">
<td align="left">x | y</td>
<td align="left">x ou y são verdadeiros?</td>
</tr>
<tr class="odd">
<td align="left">x &amp; y</td>
<td align="left">x e y são verdadeiros?</td>
</tr>
<tr class="even">
<td align="left">xor(x, y)</td>
<td align="left">x ou y são verdadeiros (apenas um deles)?</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="fórmulas" class="section level2">
<h2><span class="header-section-number">3.6</span> Fórmulas</h2>
<p>Fórmulas são objetos do tipo <code>y ~ x</code>. Em geral, elas representam associações entre objetos, como em um modelo de regressão. As funções as usam de diversas maneiras, mas o exemplo mais emblemático vem da modelagem estatística.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" title="1">formula &lt;-<span class="st"> </span>y <span class="op">~</span><span class="st"> </span>x1 <span class="op">+</span><span class="st"> </span>x2</a>
<a class="sourceLine" id="cb42-2" title="2"><span class="kw">class</span>(formula)</a>
<a class="sourceLine" id="cb42-3" title="3"><span class="co">## [1] &quot;formula&quot;</span></a></code></pre></div>
<p>A função <code>lm()</code> é a que ajusta um modelo linear no R, e <code>lm(y ~ x)</code> lê-se “regressão linear de y explicada por x”.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" title="1">minha_formula &lt;-<span class="st"> </span>Sepal.Width <span class="op">~</span><span class="st"> </span>Petal.Length <span class="op">+</span><span class="st"> </span>Petal.Width</a>
<a class="sourceLine" id="cb43-2" title="2"><span class="kw">class</span>(minha_formula)</a>
<a class="sourceLine" id="cb43-3" title="3"><span class="co">## [1] &quot;formula&quot;</span></a>
<a class="sourceLine" id="cb43-4" title="4"><span class="kw">lm</span>(minha_formula, <span class="dt">data =</span> iris)</a>
<a class="sourceLine" id="cb43-5" title="5"><span class="co">## </span></a>
<a class="sourceLine" id="cb43-6" title="6"><span class="co">## Call:</span></a>
<a class="sourceLine" id="cb43-7" title="7"><span class="co">## lm(formula = minha_formula, data = iris)</span></a>
<a class="sourceLine" id="cb43-8" title="8"><span class="co">## </span></a>
<a class="sourceLine" id="cb43-9" title="9"><span class="co">## Coefficients:</span></a>
<a class="sourceLine" id="cb43-10" title="10"><span class="co">##  (Intercept)  Petal.Length   Petal.Width  </span></a>
<a class="sourceLine" id="cb43-11" title="11"><span class="co">##       3.5870       -0.2571        0.3640</span></a></code></pre></div>
<p>No caso específico dos modelos lineares, são nas fórmulas que conseguimos descrever as variáveis explicativas e suas interações. A fórmula <code>y ~ x1 * x2</code> significa “y regredido por x1, x2 e a interação entre x1 e x2”. Fórmulas aparecem frequentemente em tarefas de modelagem.</p>
<p>Demais usos de fórmulas aparecerão em outras funções, como as do pacote <code>ggplot2</code>, com outros significados, e a documentação nos dirá como usá-las.</p>
</div>
<div id="gráficos-base" class="section level2">
<h2><span class="header-section-number">3.7</span> Gráficos (base)</h2>
<p>O R já vem com funções básicas que fazem gráficos estatísticos de todas as naturezas.</p>
<ul>
<li>Vantagens: são rápidas e simples.</li>
<li>Desvantagens: são feias e difíceis para gerar gráficos complexos.</li>
</ul>
<p>Nesta seção, mostraremos como construir alguns tipos de gráficos usando as funções base do R, mas o nosso foco em visualização de dados está nas funções do pacote <code>ggplot2</code>.</p>
<div id="gráfico-de-dispersão" class="section level3">
<h3><span class="header-section-number">3.7.1</span> Gráfico de dispersão</h3>
<p>Para construir um gráfico de dispersão, utilizamos a função <code>plot()</code>. Seus principais parâmetros são:</p>
<ul>
<li><code>x</code>, <code>y</code> - Vetores para representarem os eixos x e y.</li>
<li><code>type</code> - Tipo de gráfico. Pode ser pontos, linhas, escada, entre outros.</li>
</ul>
<p>Para mais detalhes sobre os argumentos, ver <code>help(plot)</code>.</p>
<div class="admonition note">
<p class="admonition-title">
Outras formas de utilizar a função plot()
</p>
<p>
Além de gerar gráficos de dispersão, tentar chamar a função <b>plot(objeto_diferentao)</b> para qualquer tipo de objeto do R geralmente gera um gráfico interessante! Sempre tente fazer isso, a menos que seu objeto seja um <b>data.frame</b> com milhares de colunas!
</p>
</div>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" title="1">N &lt;-<span class="st"> </span><span class="dv">100</span></a>
<a class="sourceLine" id="cb44-2" title="2">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span>N</a>
<a class="sourceLine" id="cb44-3" title="3">y &lt;-<span class="st"> </span><span class="dv">5</span> <span class="op">+</span><span class="st"> </span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span>x <span class="op">+</span><span class="st"> </span><span class="kw">rnorm</span>(N, <span class="dt">sd =</span> <span class="dv">30</span>)</a>
<a class="sourceLine" id="cb44-4" title="4"><span class="kw">plot</span>(x, y)</a></code></pre></div>
<p><img src="temp_files/figure-html/unnamed-chunk-46-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>O parâmetro <code>type = "l"</code> indica que queremos que os pontos sejam interligados por linhas.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" title="1"><span class="kw">plot</span>(x, y, <span class="dt">type =</span> <span class="st">&quot;l&quot;</span>)</a></code></pre></div>
<p><img src="temp_files/figure-html/unnamed-chunk-47-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="histograma" class="section level3">
<h3><span class="header-section-number">3.7.2</span> Histograma</h3>
<p>Para construir histogramas, utilizamos a função <code>hist()</code>. Os principais parâmetros são:</p>
<ul>
<li><code>x</code> - O vetor numérico para o qual o histograma será construído.</li>
<li><code>breaks</code> - O número (aproximado) de retângulos.</li>
</ul>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" title="1"><span class="kw">hist</span>(<span class="kw">rnorm</span>(<span class="dv">1000</span>))</a></code></pre></div>
<p><img src="temp_files/figure-html/unnamed-chunk-48-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" title="1"><span class="kw">hist</span>(<span class="kw">rnorm</span>(<span class="dv">1000</span>), <span class="dt">breaks =</span> <span class="dv">6</span>)</a></code></pre></div>
<p><img src="temp_files/figure-html/unnamed-chunk-49-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="boxplot" class="section level3">
<h3><span class="header-section-number">3.7.3</span> Boxplot</h3>
<p>Para construir histogramas, utilizamos a função <code>boxplot()</code>. Os principais parâmetros são:</p>
<ul>
<li><code>x</code> - O vetor numérico para o qual o boxplot será construído.</li>
</ul>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" title="1"><span class="kw">boxplot</span>(InsectSprays<span class="op">$</span>count, <span class="dt">col =</span> <span class="st">&quot;lightgray&quot;</span>)</a></code></pre></div>
<p><img src="temp_files/figure-html/unnamed-chunk-50-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Observe que o argumento <code>col=</code> muda a cor da caixa do boxplot.</p>
<p>Para mapear duas variáveis ao gráfico, utilizamos um objeto da classe <code>formula</code> e o argumento <code>data=</code>.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" title="1"><span class="kw">boxplot</span>(count <span class="op">~</span><span class="st"> </span>spray, <span class="dt">data =</span> InsectSprays, <span class="dt">col =</span> <span class="st">&quot;lightgray&quot;</span>)</a></code></pre></div>
<p><img src="temp_files/figure-html/unnamed-chunk-51-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="gráfico-de-barras" class="section level3">
<h3><span class="header-section-number">3.7.4</span> Gráfico de barras</h3>
<p>Para construir gráficos de barras, precisamos combinar as funções <code>table()</code> e <code>barplot()</code>.</p>
<p>No gráfico abaixo, primeiro criamos uma tabela de frequências com a função <code>table()</code> e, em seguida, construímos o gráfico com a função <code>barplot()</code>. A função <code>data()</code> carrega bases de dados de pacotes instalados. Veja <code>help(data)</code> para mais detalhes.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" title="1"><span class="kw">data</span>(diamonds, <span class="dt">package =</span> <span class="st">&quot;ggplot2&quot;</span>)</a>
<a class="sourceLine" id="cb50-2" title="2">tabela &lt;-<span class="st"> </span><span class="kw">table</span>(diamonds<span class="op">$</span>color)</a>
<a class="sourceLine" id="cb50-3" title="3">tabela</a>
<a class="sourceLine" id="cb50-4" title="4"><span class="co">## </span></a>
<a class="sourceLine" id="cb50-5" title="5"><span class="co">##     D     E     F     G     H     I     J </span></a>
<a class="sourceLine" id="cb50-6" title="6"><span class="co">##  6775  9797  9542 11292  8304  5422  2808</span></a>
<a class="sourceLine" id="cb50-7" title="7"><span class="kw">barplot</span>(tabela)</a></code></pre></div>
<p><img src="temp_files/figure-html/unnamed-chunk-52-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Também podemos mapear duas variáveis a um gráfico de barras utilizando tabelas de dupla entrada.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" title="1">VADeaths</a>
<a class="sourceLine" id="cb51-2" title="2"><span class="co">##       Rural Male Rural Female Urban Male Urban Female</span></a>
<a class="sourceLine" id="cb51-3" title="3"><span class="co">## 50-54       11.7          8.7       15.4          8.4</span></a>
<a class="sourceLine" id="cb51-4" title="4"><span class="co">## 55-59       18.1         11.7       24.3         13.6</span></a>
<a class="sourceLine" id="cb51-5" title="5"><span class="co">## 60-64       26.9         20.3       37.0         19.3</span></a>
<a class="sourceLine" id="cb51-6" title="6"><span class="co">## 65-69       41.0         30.9       54.6         35.1</span></a>
<a class="sourceLine" id="cb51-7" title="7"><span class="co">## 70-74       66.0         54.3       71.1         50.0</span></a></code></pre></div>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" title="1"><span class="kw">barplot</span>(VADeaths)</a></code></pre></div>
<p><img src="temp_files/figure-html/unnamed-chunk-54-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
</div>
<div id="exercícios" class="section level2">
<h2><span class="header-section-number">3.8</span> Exercícios</h2>
<p><strong>Sugestão</strong>: resolva os exercícios em arquivo R Markdown, aproveitando para fazer anotações e registrar suas dúvidas ao longo do caminho.</p>
<p><strong>1.</strong> Calculo o número de ouro no R.</p>
<p>Dica: o número de ouro é dado pela expressão <span class="math inline">\(\frac{1 + \sqrt{5}}{2}\)</span>.</p>
<hr />
<p><strong>2.</strong> Qual o resultado da divisão de 1 por 0 no R? E de -1 por 0?</p>
<hr />
<p><strong>3.</strong> Quais as diferenças entre <code>NaN</code>, <code>NULL</code>, <code>NA</code> e <code>Inf</code>? Digite expressões que retornam cada um desses resultados.</p>
<hr />
<p><strong>4.</strong> Sem rodar o código, calcule o que a expressão <code>5 + 3 * 10 %/% 3 == 15</code> vai resultar no R. Em seguida, apenas utilizando parênteses, faço a expressão retornar o valore contrário (i.e., se originariamente for <code>TRUE</code>, faça retornar <code>FALSE</code>).</p>
<hr />
<p><strong>5.</strong> Por que o código abaixo retorna erro? Arrume o código para retornar o valor <code>TRUE</code>.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb53-1" title="1">x &lt;-<span class="st"> </span><span class="dv">4</span></a>
<a class="sourceLine" id="cb53-2" title="2"><span class="cf">if</span>(<span class="dt">x =</span> <span class="dv">4</span>) {</a>
<a class="sourceLine" id="cb53-3" title="3">  <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb53-4" title="4">}</a></code></pre></div>
<hr />
<p><strong>6.</strong> Usando <code>if</code> e <code>else</code>, escreva um código que retorne a string “número” caso o valor seja da classe <code>numeric</code> ou <code>integer</code>; a string “palavra” caso o valor seja da classe <code>character</code>; e <code>NULL</code> caso contrário.</p>
<hr />
<p><strong>7.</strong> Use o <code>for</code> para retornar o valor mínimo do seguinte vetor: <code>vetor &lt;- c(4, 2, 1, 5, 3)</code>. Modifique o seu código para receber vetores de qualquer tamanho.</p>
<hr />
<p><strong>8.</strong> Usando apenas <code>for</code> e a função <code>length()</code>, construa uma função que calcule a média de um vetor número qualquer. Construa uma condição para a função retornar <code>NULL</code> caso o vetor não seja numérico.</p>
<hr />
<p><strong>9.</strong> Rode <code>help(runif)</code> para descobrir o que a função <code>runif()</code> faz. Em seguida, use-a para escrever uma função que retorne um número aleatório inteiro entre 0 e 10 (0 e 10 inclusive).</p>
<hr />
<p><strong>10.</strong> Rode <code>help(sample)</code> para descobrir o que a função <code>sample()</code> faz. Em seguida, use-a para escrever uma função que escolha uma linha aleatoriamente de uma matriz e devolva os seus valores.</p>
<hr />
<p><strong>11.</strong> Rode <code>help(paste)</code> e <code>help(names)</code> para descobrir o que as funções <code>paste()</code> e <code>names()</code> fazem. Em seguida, use-as para escrever um código para gerar a fórmula <code>mpg ~ cyl + disp + hp + drat + wt + qsec + vs + am + gear + carb</code> a partir do data frame <code>mtcars</code>.</p>
<hr />
</div>
<div id="respostas" class="section level2">
<h2><span class="header-section-number">3.9</span> Respostas</h2>
<p><strong>1.</strong> Calculo o número de ouro no R.</p>
<p>Dica: o número de ouro é dado pela expressão <span class="math inline">\(\frac{1 + \sqrt{5}}{2}\)</span>.</p>
<p><strong>Resposta:</strong></p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" title="1">(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="kw">sqrt</span>(<span class="dv">5</span>))<span class="op">/</span><span class="dv">2</span></a></code></pre></div>
<hr />
<p><strong>2.</strong> Qual o resultado da divisão de 1 por 0 no R? E de -1 por 0?</p>
<p><strong>Resposta:</strong></p>
<p>Infinito e -Infinito.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" title="1"><span class="dv">1</span><span class="op">/</span><span class="dv">0</span></a>
<a class="sourceLine" id="cb55-2" title="2"><span class="co">## [1] Inf</span></a>
<a class="sourceLine" id="cb55-3" title="3"><span class="dv">-1</span><span class="op">/</span><span class="dv">0</span></a>
<a class="sourceLine" id="cb55-4" title="4"><span class="co">## [1] -Inf</span></a></code></pre></div>
<hr />
<p><strong>3.</strong> Quais as diferenças entre <code>NaN</code>, <code>NULL</code>, <code>NA</code> e <code>Inf</code>? Digite expressões que retornam cada um desses resultados.</p>
<p><strong>Resposta:</strong></p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" title="1"><span class="co"># NaN é o resultado de uma operação matemática inválida. </span></a>
<a class="sourceLine" id="cb56-2" title="2"><span class="co"># Significa Not A Number.</span></a>
<a class="sourceLine" id="cb56-3" title="3"></a>
<a class="sourceLine" id="cb56-4" title="4"><span class="dv">0</span><span class="op">/</span><span class="dv">0</span></a>
<a class="sourceLine" id="cb56-5" title="5"><span class="co">## [1] NaN</span></a></code></pre></div>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" title="1"><span class="co"># NULL é o vazio do R. É como se o objeto não existisse.</span></a>
<a class="sourceLine" id="cb57-2" title="2"></a>
<a class="sourceLine" id="cb57-3" title="3"><span class="ot">NULL</span></a>
<a class="sourceLine" id="cb57-4" title="4">a =<span class="st"> </span><span class="ot">NULL</span></a></code></pre></div>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" title="1"><span class="co"># veja que um vetor, mesmo sem elementos não é NULL</span></a>
<a class="sourceLine" id="cb58-2" title="2"></a>
<a class="sourceLine" id="cb58-3" title="3"><span class="kw">is.null</span>(<span class="kw">integer</span>(<span class="dt">length =</span> <span class="dv">0</span>)) </a>
<a class="sourceLine" id="cb58-4" title="4"><span class="co">## [1] FALSE</span></a>
<a class="sourceLine" id="cb58-5" title="5"></a>
<a class="sourceLine" id="cb58-6" title="6"><span class="co"># NA é uma constante lógica do R. Siginifica Not Availlable. </span></a>
<a class="sourceLine" id="cb58-7" title="7"><span class="co"># NA pode ser convertido para quase todos os tipos de vetores do R. </span></a>
<a class="sourceLine" id="cb58-8" title="8"><span class="co"># É usado principalmente para indicar valores faltantes.</span></a>
<a class="sourceLine" id="cb58-9" title="9"></a>
<a class="sourceLine" id="cb58-10" title="10"><span class="ot">NA</span></a>
<a class="sourceLine" id="cb58-11" title="11"><span class="co">## [1] NA</span></a>
<a class="sourceLine" id="cb58-12" title="12"><span class="kw">as.numeric</span>(<span class="kw">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;2&quot;</span>, <span class="st">&quot;a&quot;</span>))</a>
<a class="sourceLine" id="cb58-13" title="13"><span class="co">## Warning: NAs introduced by coercion</span></a>
<a class="sourceLine" id="cb58-14" title="14"><span class="co">## [1]  1  2 NA</span></a>
<a class="sourceLine" id="cb58-15" title="15"></a>
<a class="sourceLine" id="cb58-16" title="16"><span class="co"># Inf é significa infinito. É o resultado de operações matemáticas </span></a>
<a class="sourceLine" id="cb58-17" title="17"><span class="co"># cujo limite é infinito.</span></a>
<a class="sourceLine" id="cb58-18" title="18"></a>
<a class="sourceLine" id="cb58-19" title="19"><span class="dv">1</span><span class="op">/</span><span class="dv">0</span></a>
<a class="sourceLine" id="cb58-20" title="20"><span class="co">## [1] Inf</span></a>
<a class="sourceLine" id="cb58-21" title="21"><span class="dv">1</span><span class="op">/</span><span class="ot">Inf</span></a>
<a class="sourceLine" id="cb58-22" title="22"><span class="co">## [1] 0</span></a></code></pre></div>
<hr />
<p><strong>4.</strong> Sem rodar o código, calcule o que a expressão <code>5 + 3 * 10 %/% 3 == 15</code> vai resultar no R. Em seguida, apenas utilizando parênteses, faço a expressão retornar o valore contrário (i.e., se originariamente for <code>TRUE</code>, faça retornar <code>FALSE</code>).</p>
<p><strong>Resposta:</strong></p>
<p>O resultado da parte esquerda é 14, por isso a expressão retornará <code>FALSE</code>. Para fazê-la retornar <code>TRUE</code>, basta colocar parênteses em volta de <code>3 * 10</code>.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb59-1" title="1"><span class="dv">5</span> <span class="op">+</span><span class="st"> </span>(<span class="dv">3</span> <span class="op">*</span><span class="st"> </span><span class="dv">10</span>) <span class="op">%/%</span><span class="st"> </span><span class="dv">3</span> <span class="op">==</span><span class="st"> </span><span class="dv">15</span></a>
<a class="sourceLine" id="cb59-2" title="2"><span class="co">## [1] TRUE</span></a></code></pre></div>
<hr />
<p><strong>5.</strong> Por que o código abaixo retorna erro? Arrume o código para retornar o valor <code>TRUE</code>.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" title="1">x &lt;-<span class="st"> </span><span class="dv">4</span></a>
<a class="sourceLine" id="cb60-2" title="2"><span class="cf">if</span>(<span class="dt">x =</span> <span class="dv">4</span>) {</a>
<a class="sourceLine" id="cb60-3" title="3">  <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb60-4" title="4">}</a></code></pre></div>
<p><strong>Resposta:</strong></p>
<p>A expressão <code>x = 4</code> está tentando atribuir o valor 4 ao objeto <code>x</code> dentro do if, o que não é permitido pois o controlador <code>if</code> só aceita valores lógicos. Para corrigir o código e fazê-lo retornar <code>TRUE</code>, basta trocar <code>=</code> por <code>==</code>.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb61-1" title="1">x &lt;-<span class="st"> </span><span class="dv">4</span></a>
<a class="sourceLine" id="cb61-2" title="2"><span class="cf">if</span>(x <span class="op">==</span><span class="st"> </span><span class="dv">4</span>) {</a>
<a class="sourceLine" id="cb61-3" title="3">  <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb61-4" title="4">}</a>
<a class="sourceLine" id="cb61-5" title="5"><span class="co">## [1] TRUE</span></a></code></pre></div>
<hr />
<p><strong>6.</strong> Usando <code>if</code> e <code>else</code>, escreva um código que retorne a string “número” caso o objeto <code>x</code> seja da classe <code>numeric</code> ou <code>integer</code>; a string “palavra” caso o objeto seja da classe <code>character</code>; e <code>NULL</code> caso contrário.</p>
<p><strong>Resposta:</strong></p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" title="1">x &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb62-2" title="2"><span class="co"># x &lt;- 1L</span></a>
<a class="sourceLine" id="cb62-3" title="3"><span class="co"># x &lt;- &quot;1&quot;</span></a>
<a class="sourceLine" id="cb62-4" title="4"></a>
<a class="sourceLine" id="cb62-5" title="5"><span class="cf">if</span>(<span class="kw">is.numeric</span>(x)) {</a>
<a class="sourceLine" id="cb62-6" title="6">  <span class="st">&quot;número&quot;</span></a>
<a class="sourceLine" id="cb62-7" title="7"><span class="st">} else if(is.character(x)) {</span></a>
<a class="sourceLine" id="cb62-8" title="8"><span class="st">  &quot;</span>palavra<span class="st">&quot;</span></a>
<a class="sourceLine" id="cb62-9" title="9"><span class="st">} else { </span></a>
<a class="sourceLine" id="cb62-10" title="10"><span class="st">  NULL</span></a>
<a class="sourceLine" id="cb62-11" title="11"><span class="st">}</span></a>
<a class="sourceLine" id="cb62-12" title="12"><span class="st">## [1] &quot;</span>número&quot;</a></code></pre></div>
<p>Note que a função <code>is.numeric()</code> retorna <code>TRUE</code> para as classes <code>integer</code> e <code>numeric</code>.</p>
<hr />
<p><strong>7.</strong> Use o <code>for</code> para retornar o valor mínimo do seguinte vetor: <code>vetor &lt;- c(4, 2, 1, 5, 3)</code>. Modifique o seu código para receber vetores de qualquer tamanho.</p>
<p><strong>Resposta:</strong></p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb63-1" title="1"></a>
<a class="sourceLine" id="cb63-2" title="2">vetor &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb63-3" title="3">minimo &lt;-<span class="st"> </span><span class="ot">Inf</span></a>
<a class="sourceLine" id="cb63-4" title="4"></a>
<a class="sourceLine" id="cb63-5" title="5"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>) {</a>
<a class="sourceLine" id="cb63-6" title="6">  </a>
<a class="sourceLine" id="cb63-7" title="7">  <span class="cf">if</span>(minimo <span class="op">&gt;</span><span class="st"> </span>vetor[i]) {</a>
<a class="sourceLine" id="cb63-8" title="8">    minimo &lt;-<span class="st"> </span>vetor[i]</a>
<a class="sourceLine" id="cb63-9" title="9">  }</a>
<a class="sourceLine" id="cb63-10" title="10">  </a>
<a class="sourceLine" id="cb63-11" title="11">}</a>
<a class="sourceLine" id="cb63-12" title="12"></a>
<a class="sourceLine" id="cb63-13" title="13">minimo</a>
<a class="sourceLine" id="cb63-14" title="14"><span class="co">## [1] 1</span></a></code></pre></div>
<p><strong>Lembrete</strong>: o R já possui a função <code>min()</code> para calcular o mínimo de um conjunto de valores.</p>
<hr />
<p><strong>8.</strong> Usando apenas <code>for</code> e a função <code>length()</code>, construa uma função que calcule a média de um vetor número qualquer. Construa uma condição para a função retornar <code>NULL</code> caso o vetor não seja numérico.</p>
<p><strong>Resposta:</strong></p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" title="1">media &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb64-2" title="2">  </a>
<a class="sourceLine" id="cb64-3" title="3">  i &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb64-4" title="4">  tamanho &lt;-<span class="st"> </span><span class="kw">length</span>(x)</a>
<a class="sourceLine" id="cb64-5" title="5">  soma &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb64-6" title="6">  </a>
<a class="sourceLine" id="cb64-7" title="7">  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>tamanho){</a>
<a class="sourceLine" id="cb64-8" title="8">    soma &lt;-<span class="st"> </span>soma <span class="op">+</span><span class="st"> </span>x[i]</a>
<a class="sourceLine" id="cb64-9" title="9">  }</a>
<a class="sourceLine" id="cb64-10" title="10">  </a>
<a class="sourceLine" id="cb64-11" title="11">  <span class="kw">return</span>(soma<span class="op">/</span>tamanho)</a>
<a class="sourceLine" id="cb64-12" title="12">}</a>
<a class="sourceLine" id="cb64-13" title="13"></a>
<a class="sourceLine" id="cb64-14" title="14"><span class="kw">media</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb64-15" title="15"><span class="co">## [1] 2</span></a></code></pre></div>
<hr />
<p><strong>9.</strong> Rode <code>help(runif)</code> para descobrir o que a função <code>runif()</code> faz. Em seguida, use-a para escrever uma função que retorne um número aleatório inteiro entre 0 e 10 (0 e 10 inclusive).</p>
<p><strong>Resposta:</strong></p>
<p>A função <code>runif()</code> gera números reais aleatórios entre um valor mínimo e um valor máximo.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb65-1" title="1">alea &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb65-2" title="2">  </a>
<a class="sourceLine" id="cb65-3" title="3">  x &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dt">n =</span> <span class="dv">1</span>, <span class="dt">min =</span> <span class="dv">0</span>, <span class="dt">max =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb65-4" title="4">  x &lt;-<span class="st"> </span><span class="kw">round</span>(x)</a>
<a class="sourceLine" id="cb65-5" title="5">  </a>
<a class="sourceLine" id="cb65-6" title="6">  <span class="kw">return</span>(x)</a>
<a class="sourceLine" id="cb65-7" title="7">}</a>
<a class="sourceLine" id="cb65-8" title="8"></a>
<a class="sourceLine" id="cb65-9" title="9"><span class="kw">alea</span>()</a>
<a class="sourceLine" id="cb65-10" title="10"><span class="co">## [1] 5</span></a></code></pre></div>
<p>Veja que construímos uma função sem argumentos. Podemos generalizá-la incluindo os argumentos da função <code>runif()</code>.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb66-1" title="1">alea &lt;-<span class="st"> </span><span class="cf">function</span>(n, min, max) {</a>
<a class="sourceLine" id="cb66-2" title="2">  </a>
<a class="sourceLine" id="cb66-3" title="3">  x &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dt">n =</span> n, <span class="dt">min =</span> min, <span class="dt">max =</span> max)</a>
<a class="sourceLine" id="cb66-4" title="4">  x &lt;-<span class="st"> </span><span class="kw">round</span>(x)</a>
<a class="sourceLine" id="cb66-5" title="5">  </a>
<a class="sourceLine" id="cb66-6" title="6">  <span class="kw">return</span>(x)</a>
<a class="sourceLine" id="cb66-7" title="7">}</a>
<a class="sourceLine" id="cb66-8" title="8"></a>
<a class="sourceLine" id="cb66-9" title="9"><span class="kw">alea</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb66-10" title="10"><span class="co">## [1] 4 5</span></a>
<a class="sourceLine" id="cb66-11" title="11"><span class="kw">alea</span>(<span class="dv">5</span>, <span class="dv">100</span>, <span class="dv">105</span>)</a>
<a class="sourceLine" id="cb66-12" title="12"><span class="co">## [1] 104 102 101 101 102</span></a></code></pre></div>
<p>Observe que não há problema em usar os mesmos nomes para os argumentos. Isso se deve aos <em>environments</em>.</p>
<hr />
<p><strong>10.</strong> Rode <code>help(sample)</code> para descobrir o que a função <code>sample()</code> faz. Em seguida, use-a para escrever uma função que escolha uma linha aleatoriamente de uma matriz e devolva os seus valores.</p>
<p><strong>Resposta:</strong></p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb67-1" title="1">matriz &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">runif</span>(<span class="dv">20</span>), <span class="dt">nrow =</span> <span class="dv">5</span>, <span class="dt">ncol =</span> <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb67-2" title="2"></a>
<a class="sourceLine" id="cb67-3" title="3">linha_alea &lt;-<span class="st"> </span><span class="cf">function</span>(matriz) {</a>
<a class="sourceLine" id="cb67-4" title="4">  </a>
<a class="sourceLine" id="cb67-5" title="5">  x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(matriz)</a>
<a class="sourceLine" id="cb67-6" title="6">  </a>
<a class="sourceLine" id="cb67-7" title="7">  linha &lt;-<span class="st"> </span><span class="kw">sample</span>(x, <span class="dt">size =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb67-8" title="8">  </a>
<a class="sourceLine" id="cb67-9" title="9">  <span class="kw">return</span>(matriz[linha,])</a>
<a class="sourceLine" id="cb67-10" title="10">}</a>
<a class="sourceLine" id="cb67-11" title="11"></a>
<a class="sourceLine" id="cb67-12" title="12">matriz</a>
<a class="sourceLine" id="cb67-13" title="13"><span class="co">##           [,1]       [,2]      [,3]       [,4]</span></a>
<a class="sourceLine" id="cb67-14" title="14"><span class="co">## [1,] 0.9476913 0.37040185 0.3422454 0.96524849</span></a>
<a class="sourceLine" id="cb67-15" title="15"><span class="co">## [2,] 0.6450708 0.68039543 0.1569188 0.54769243</span></a>
<a class="sourceLine" id="cb67-16" title="16"><span class="co">## [3,] 0.8296116 0.98706017 0.8532506 0.55424712</span></a>
<a class="sourceLine" id="cb67-17" title="17"><span class="co">## [4,] 0.4860344 0.66333462 0.3593599 0.28477291</span></a>
<a class="sourceLine" id="cb67-18" title="18"><span class="co">## [5,] 0.1338947 0.04237775 0.8893972 0.05976397</span></a>
<a class="sourceLine" id="cb67-19" title="19"><span class="kw">linha_alea</span>(matriz)</a>
<a class="sourceLine" id="cb67-20" title="20"><span class="co">## [1] 0.9476913 0.3704018 0.3422454 0.9652485</span></a></code></pre></div>
<hr />
<p><strong>11.</strong> Rode <code>help(paste)</code> e <code>help(names)</code> para descobrir o que as funções <code>paste()</code> e <code>names()</code> fazem. Em seguida, use-as para escrever um código para gerar a fórmula <code>mpg ~ cyl + disp + hp + drat + wt + qsec + vs + am + gear + carb</code> a partir do data frame <code>mtcars</code>.</p>
<p><strong>Resposta:</strong></p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" title="1">variaveis &lt;-<span class="st"> </span><span class="kw">names</span>(mtcars)</a>
<a class="sourceLine" id="cb68-2" title="2"></a>
<a class="sourceLine" id="cb68-3" title="3">esq &lt;-<span class="st"> &quot;mpg ~ &quot;</span></a>
<a class="sourceLine" id="cb68-4" title="4">dir &lt;-<span class="st"> </span><span class="kw">paste</span>(variaveis[<span class="op">-</span><span class="dv">1</span>], <span class="dt">collapse =</span> <span class="st">&quot; + &quot;</span>)</a>
<a class="sourceLine" id="cb68-5" title="5"></a>
<a class="sourceLine" id="cb68-6" title="6">formula &lt;-<span class="st"> </span><span class="kw">paste0</span>(esq, dir)</a>
<a class="sourceLine" id="cb68-7" title="7"><span class="kw">as.formula</span>(formula)</a>
<a class="sourceLine" id="cb68-8" title="8"><span class="co">## mpg ~ cyl + disp + hp + drat + wt + qsec + vs + am + gear + carb</span></a></code></pre></div>
<p>Observe que a função <code>paste0()</code> é equivalente à função <code>paste()</code> com o argumento <code>sep = ""</code>.</p>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>Essa ideia é um dos princípios por trás do <code>tidyverse</code>.<a href="r-básico.html#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p>Você pode construir um <em>data frame</em> vazio, com 0 linha e 0 coluna. No entanto, a <em>estrutura</em> de linhas e colunas estará presente.<a href="r-básico.html#fnref2" class="footnote-back">↩</a></p></li>
<li id="fn3"><p>A primeira “coluna” representa apenas o <em>nome</em> das linhas (modelo do carro), não é uma coluna da base. Repare que ela não possui um nome, como as outras. Essa estrutura de nome de linha é própria de <em>data frames</em> no R. Se exportássemos essa base para o Excel, por exemplo, essa coluna não apareceria.<a href="r-básico.html#fnref3" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="rstudio.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="pipe.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["temp.pdf", "temp.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
